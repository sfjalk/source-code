{"remainingRequest":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/user/ResetPwd.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/user/ResetPwd.vue","mtime":1758037355233},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/babel-loader/lib/index.js","mtime":1767024830795},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js","mtime":1767024826361}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCB7IGNsZWFyVG9rZW4gfSBmcm9tICJAL3V0aWxzL3N0b3JhZ2UiOw0KICANCiAgZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJSZXNldFB3ZCIsDQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG9sZFB3ZDogIiIsDQogICAgICAgIG5ld1B3ZDogIiIsDQogICAgICAgIGFnYWluUHdkOiAiIiwNCiAgICAgICAgc3VibWl0dGluZzogZmFsc2UNCiAgICAgIH07DQogICAgfSwNCiAgICBjb21wdXRlZDogew0KICAgICAgZm9ybVZhbGlkKCkgew0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgIHRoaXMub2xkUHdkLmxlbmd0aCA+PSA4ICYmDQogICAgICAgICAgdGhpcy5uZXdQd2QubGVuZ3RoID49IDggJiYNCiAgICAgICAgICB0aGlzLmFnYWluUHdkLmxlbmd0aCA+PSA4ICYmDQogICAgICAgICAgdGhpcy5uZXdQd2QgPT09IHRoaXMuYWdhaW5Qd2QNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIC8vIOaPkOS6pOWvhueggeS/ruaUuQ0KICAgICAgYXN5bmMgcG9zdEluZm8oKSB7DQogICAgICAgIGlmICghdGhpcy52YWxpZGF0ZVBhc3N3b3JkKCkpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgDQogICAgICAgIHRoaXMuc3VibWl0dGluZyA9IHRydWU7DQogIA0KICAgICAgICB0cnkgew0KICAgICAgICAgIGNvbnN0IHVzZXJVcGRhdGVQd2REVE8gPSB7DQogICAgICAgICAgICBvbGRQd2Q6IHRoaXMuJG1kNSh0aGlzLiRtZDUodGhpcy5vbGRQd2QpKSwNCiAgICAgICAgICAgIG5ld1B3ZDogdGhpcy4kbWQ1KHRoaXMuJG1kNSh0aGlzLm5ld1B3ZCkpLA0KICAgICAgICAgICAgYWdhaW5Qd2Q6IHRoaXMuJG1kNSh0aGlzLiRtZDUodGhpcy5hZ2FpblB3ZCkpDQogICAgICAgICAgfTsNCiAgDQogICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCB0aGlzLiRheGlvcy5wdXQoIi91c2VyL3VwZGF0ZVB3ZCIsIHVzZXJVcGRhdGVQd2REVE8pOw0KICANCiAgICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgICAgZHVyYXRpb246IDIwMDAsDQogICAgICAgICAgICB0aXRsZTogIuS/ruaUueWvhueggSIsDQogICAgICAgICAgICBtZXNzYWdlOiBkYXRhLmNvZGUgPT09IDIwMCA/ICLkv67mlLnmiJDlip/vvIzor7fph43mlrDnmbvlvZUiIDogZGF0YS5tc2csDQogICAgICAgICAgICB0eXBlOiBkYXRhLmNvZGUgPT09IDIwMCA/ICJzdWNjZXNzIiA6ICJlcnJvciINCiAgICAgICAgICB9KTsNCiAgDQogICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICBjbGVhclRva2VuKCk7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7DQogICAgICAgICAgfQ0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuWvhueggeS/ruaUueWksei0pToiLCBlcnJvcik7DQogICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsNCiAgICAgICAgICAgIHRpdGxlOiAi6ZSZ6K+vIiwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlr4bnoIHkv67mlLnlpLHotKXvvIzor7fnqI3lkI7ph43or5UiDQogICAgICAgICAgfSk7DQogICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0sDQogIA0KICAgICAgLy8g5a+G56CB6aqM6K+BDQogICAgICB2YWxpZGF0ZVBhc3N3b3JkKCkgew0KICAgICAgICBpZiAodGhpcy5vbGRQd2QubGVuZ3RoIDwgOCkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygi5Y6f5aeL5a+G56CB6ZW/5bqm5LiN6IO95bCR5LqOOOS9jSIpOw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICANCiAgICAgICAgaWYgKHRoaXMubmV3UHdkLmxlbmd0aCA8IDgpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuaWsOWvhueggemVv+W6puS4jeiDveWwkeS6jjjkvY0iKTsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgDQogICAgICAgIGlmICh0aGlzLm5ld1B3ZCAhPT0gdGhpcy5hZ2FpblB3ZCkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygi5Lik5qyh6L6T5YWl55qE5paw5a+G56CB5LiN5LiA6Ie0Iik7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogIA0KICAgICAgICAvLyDlr4bnoIHlvLrluqbpqozor4ENCiAgICAgICAgY29uc3QgaGFzTnVtYmVyID0gL1xkLy50ZXN0KHRoaXMubmV3UHdkKTsNCiAgICAgICAgY29uc3QgaGFzTGV0dGVyID0gL1thLXpBLVpdLy50ZXN0KHRoaXMubmV3UHdkKTsNCiAgDQogICAgICAgIGlmICghaGFzTnVtYmVyIHx8ICFoYXNMZXR0ZXIpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuWvhueggeW6lOWMheWQq+Wtl+avjeWSjOaVsOWtlyIpOw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICANCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQogICAgfQ0KICB9Ow0KICA="},{"version":3,"sources":["ResetPwd.vue"],"names":[],"mappings":";AAuEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ResetPwd.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n    <div class=\"password-reset-container\">\r\n      <!-- 密码修改表单 -->\r\n      <div class=\"password-form\">\r\n        <!-- 原始密码 -->\r\n        <div class=\"form-item\">\r\n          <label class=\"form-label\">*原始密码</label>\r\n          <el-input\r\n            v-model=\"oldPwd\"\r\n            type=\"password\"\r\n            placeholder=\"请输入原始密码\"\r\n            show-password\r\n            clearable\r\n            class=\"password-input\"\r\n          ></el-input>\r\n        </div>\r\n  \r\n        <!-- 新密码 -->\r\n        <div class=\"form-item\">\r\n          <label class=\"form-label\">*新密码</label>\r\n          <el-input\r\n            v-model=\"newPwd\"\r\n            type=\"password\"\r\n            placeholder=\"请输入新密码\"\r\n            show-password\r\n            clearable\r\n            class=\"password-input\"\r\n          ></el-input>\r\n        </div>\r\n  \r\n        <!-- 确认密码 -->\r\n        <div class=\"form-item\">\r\n          <label class=\"form-label\">*确认密码</label>\r\n          <el-input\r\n            v-model=\"againPwd\"\r\n            type=\"password\"\r\n            placeholder=\"请再次输入新密码\"\r\n            show-password\r\n            clearable\r\n            class=\"password-input\"\r\n            @keyup.enter.native=\"postInfo\"\r\n          ></el-input>\r\n        </div>\r\n  \r\n        <!-- 密码强度提示 -->\r\n        <div class=\"password-tips\">\r\n          <p>密码要求：</p>\r\n          <ul>\r\n            <li>长度8-20个字符</li>\r\n            <li>包含字母和数字</li>\r\n            <li>建议使用特殊字符增加安全性</li>\r\n          </ul>\r\n        </div>\r\n  \r\n        <!-- 提交按钮 -->\r\n        <div class=\"submit-btn\">\r\n          <el-button\r\n            type=\"primary\"\r\n            round\r\n            @click=\"postInfo\"\r\n            :loading=\"submitting\"\r\n            :disabled=\"!formValid\"\r\n          >\r\n            立即修改\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { clearToken } from \"@/utils/storage\";\r\n  \r\n  export default {\r\n    name: \"ResetPwd\",\r\n    data() {\r\n      return {\r\n        oldPwd: \"\",\r\n        newPwd: \"\",\r\n        againPwd: \"\",\r\n        submitting: false\r\n      };\r\n    },\r\n    computed: {\r\n      formValid() {\r\n        return (\r\n          this.oldPwd.length >= 8 &&\r\n          this.newPwd.length >= 8 &&\r\n          this.againPwd.length >= 8 &&\r\n          this.newPwd === this.againPwd\r\n        );\r\n      }\r\n    },\r\n    methods: {\r\n      // 提交密码修改\r\n      async postInfo() {\r\n        if (!this.validatePassword()) {\r\n          return;\r\n        }\r\n  \r\n        this.submitting = true;\r\n  \r\n        try {\r\n          const userUpdatePwdDTO = {\r\n            oldPwd: this.$md5(this.$md5(this.oldPwd)),\r\n            newPwd: this.$md5(this.$md5(this.newPwd)),\r\n            againPwd: this.$md5(this.$md5(this.againPwd))\r\n          };\r\n  \r\n          const { data } = await this.$axios.put(\"/user/updatePwd\", userUpdatePwdDTO);\r\n  \r\n          this.$notify({\r\n            duration: 2000,\r\n            title: \"修改密码\",\r\n            message: data.code === 200 ? \"修改成功，请重新登录\" : data.msg,\r\n            type: data.code === 200 ? \"success\" : \"error\"\r\n          });\r\n  \r\n          if (data.code === 200) {\r\n            clearToken();\r\n            this.$router.push(\"/login\");\r\n          }\r\n        } catch (error) {\r\n          console.error(\"密码修改失败:\", error);\r\n          this.$notify.error({\r\n            title: \"错误\",\r\n            message: \"密码修改失败，请稍后重试\"\r\n          });\r\n        } finally {\r\n          this.submitting = false;\r\n        }\r\n      },\r\n  \r\n      // 密码验证\r\n      validatePassword() {\r\n        if (this.oldPwd.length < 8) {\r\n          this.$message.warning(\"原始密码长度不能少于8位\");\r\n          return false;\r\n        }\r\n  \r\n        if (this.newPwd.length < 8) {\r\n          this.$message.warning(\"新密码长度不能少于8位\");\r\n          return false;\r\n        }\r\n  \r\n        if (this.newPwd !== this.againPwd) {\r\n          this.$message.warning(\"两次输入的新密码不一致\");\r\n          return false;\r\n        }\r\n  \r\n        // 密码强度验证\r\n        const hasNumber = /\\d/.test(this.newPwd);\r\n        const hasLetter = /[a-zA-Z]/.test(this.newPwd);\r\n  \r\n        if (!hasNumber || !hasLetter) {\r\n          this.$message.warning(\"密码应包含字母和数字\");\r\n          return false;\r\n        }\r\n  \r\n        return true;\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped lang=\"scss\">\r\n  .password-reset-container {\r\n    max-width: 500px;\r\n    margin: 0 auto;\r\n    padding: 30px;\r\n    background-color: #fff;\r\n    border-radius: 8px;\r\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .form-label {\r\n    display: block;\r\n    margin-bottom: 8px;\r\n    font-size: 14px;\r\n    color: #606266;\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .form-item {\r\n    margin-bottom: 20px;\r\n  }\r\n  \r\n  .password-input {\r\n    width: 100%;\r\n  }\r\n  \r\n  .password-tips {\r\n    margin: 20px 0;\r\n    padding: 10px;\r\n    background-color: #f8f8f8;\r\n    border-radius: 4px;\r\n    font-size: 13px;\r\n    color: #909399;\r\n  \r\n    p {\r\n      margin-bottom: 5px;\r\n      font-weight: 500;\r\n    }\r\n  \r\n    ul {\r\n      margin: 0;\r\n      padding-left: 20px;\r\n    }\r\n  }\r\n  \r\n  .submit-btn {\r\n    text-align: center;\r\n    margin-top: 30px;\r\n  \r\n    .el-button {\r\n      width: 200px;\r\n      padding: 12px 0;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n  </style>"]}]}