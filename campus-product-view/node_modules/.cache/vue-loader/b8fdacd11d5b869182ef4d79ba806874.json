{"remainingRequest":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/admin/ProductDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/admin/ProductDetail.vue","mtime":1758037360238},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/babel-loader/lib/index.js","mtime":1767024830795},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js","mtime":1767024826361}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCB7IGdldFVzZXJJbmZvIH0gZnJvbSAiQC91dGlscy9zdG9yYWdlIg0KICBpbXBvcnQgRXZhbHVhdGlvbnMgZnJvbSAiQC9jb21wb25lbnRzL0V2YWx1YXRpb25zIg0KICANCiAgZXhwb3J0IGRlZmF1bHQgew0KICAgIGNvbXBvbmVudHM6IHsgRXZhbHVhdGlvbnMgfSwNCiAgICBuYW1lOiAnUHJvZHVjdERldGFpbCcsDQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIHByb2R1Y3RJZDogbnVsbCwNCiAgICAgICAgcHJvZHVjdDoge30sDQogICAgICAgIGNvdmVyTGlzdDogW10sDQogICAgICAgIGNvdmVySW5kZXg6IDAsDQogICAgICAgIGNvdmVySXRlbTogbnVsbCwNCiAgICAgICAga2V5SW50ZXJ2YWw6IG51bGwsDQogICAgICAgIHNhdmVGbGFnOiBmYWxzZSwNCiAgICAgICAgZGlhbG9nUHJvZHVjdE9wZXJhaW9uOiBmYWxzZSwNCiAgICAgICAgYnV5TnVtYmVyOiAxLA0KICAgICAgICBkZXRhaWw6ICcnLA0KICAgICAgICB1c2VySW5mbzogbnVsbA0KICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgIHRoaXMuZ2V0UGFyYW0oKTsNCiAgICAgIHRoaXMudmlld09wZXJhdGlvbigpOw0KICAgIH0sDQogICAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICAgIHRoaXMuY2xlYXJCYW5uZXIoKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCg0KICAgICAgdmlld09wZXJhdGlvbigpIHsNCiAgICAgICAgY29uc3QgdXNlckluZm8gPSBnZXRVc2VySW5mbygpOw0KICAgICAgICBpZiAoIXVzZXJJbmZvKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICB0aGlzLnVzZXJJbmZvID0gdXNlckluZm87DQogICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoYC9pbnRlcmFjdGlvbi92aWV3LyR7dGhpcy5wcm9kdWN0SWR9YCkuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIua1j+iniOiusOW9leW8guW4uO+8miIsIGVycm9yKTsNCiAgICAgICAgfSkNCiAgICAgIH0sDQogICAgICANCiAgICAgIGJ1eUNvbmZpcm0oKSB7DQogICAgICAgIGNvbnN0IG9yZGVyc0RUTyA9IHsNCiAgICAgICAgICBwcm9kdWN0SWQ6IHRoaXMucHJvZHVjdC5pZCwNCiAgICAgICAgICBidXlOdW1iZXI6IHRoaXMuYnV5TnVtYmVyLA0KICAgICAgICAgIGRldGFpbDogdGhpcy5kZXRhaWwNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdGhpcy4kYXhpb3MucG9zdChgL3Byb2R1Y3QvYnV5UHJvZHVjdGAsIG9yZGVyc0RUTykudGhlbihyZXMgPT4gew0KICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzOw0KICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGRhdGEubXNnKTsNCiAgICAgICAgICAgIHRoaXMuZmV0Y2hQcm9kdWN0KHRoaXMucHJvZHVjdC5pZCk7DQogICAgICAgICAgICB0aGlzLmNhbm5lbEJ1eSgpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGRhdGEubXNnKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIvljZXlpLHotKUnKTsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCLllYblk4HkuIvljZXlvILluLjvvJoiLCBlcnJvcik7DQogICAgICAgIH0pDQogICAgICB9LA0KICAgICAgDQogICAgICBjYW5uZWxCdXkoKSB7DQogICAgICAgIHRoaXMuZGlhbG9nUHJvZHVjdE9wZXJhaW9uID0gZmFsc2U7DQogICAgICAgIHRoaXMuYnV5TnVtYmVyID0gMTsNCiAgICAgICAgdGhpcy5kZXRhaWwgPSAnJzsNCiAgICAgIH0sDQogICAgICANCiAgICAgIGJ1eVByb2R1Y3QoKSB7DQogICAgICAgIHRoaXMuZGlhbG9nUHJvZHVjdE9wZXJhaW9uID0gdHJ1ZTsNCiAgICAgIH0sDQogICAgICANCiAgICAgIGxpa2VQcm9kdWN0KCkgew0KICAgICAgICB0aGlzLiRheGlvcy5wb3N0KGAvaW50ZXJhY3Rpb24vbGlrZVByb2R1Y3QvJHt0aGlzLnByb2R1Y3QuaWR9YCkudGhlbihyZXMgPT4gew0KICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzOw0KICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGRhdGEubXNnKTsNCiAgICAgICAgICAgIHRoaXMuZmV0Y2hQcm9kdWN0KHRoaXMucHJvZHVjdC5pZCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbyhkYXRhLm1zZyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgY29uc29sZS5lcnJvcigi5ZWG5ZOB5oOz6KaB5byC5bi477yaIiwgZXJyb3IpOw0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIA0KICAgICAgcXVlcnlTYXZlU3RhdHVzKCkgew0KICAgICAgICBjb25zdCB1c2VySW5mbyA9IGdldFVzZXJJbmZvKCk7DQogICAgICAgIGlmICghdXNlckluZm8pIHJldHVybjsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IGludGVyYWN0aW9uUXVlcnlEdG8gPSB7DQogICAgICAgICAgdXNlcklkOiB1c2VySW5mby5pZCwNCiAgICAgICAgICBwcm9kdWN0SWQ6IHRoaXMucHJvZHVjdC5pZCwNCiAgICAgICAgICB0eXBlOiAxDQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCcvaW50ZXJhY3Rpb24vcXVlcnknLCBpbnRlcmFjdGlvblF1ZXJ5RHRvKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXM7DQogICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICB0aGlzLnNhdmVGbGFnID0gZGF0YS50b3RhbCAhPT0gMDsNCiAgICAgICAgICB9DQogICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCLmlLbol4/nirbmgIHmn6Xor6LlvILluLjvvJoiLCBlcnJvcik7DQogICAgICAgIH0pDQogICAgICB9LA0KICAgICAgDQogICAgICBzYXZlT3BlcmF0aW9uKCkgew0KICAgICAgICB0aGlzLiRheGlvcy5wb3N0KGAvaW50ZXJhY3Rpb24vc2F2ZU9wZXJhdGlvbi8ke3RoaXMucHJvZHVjdC5pZH1gKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXM7DQogICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICB0aGlzLnNhdmVGbGFnID0gZGF0YS5kYXRhOw0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGRhdGEubXNnKTsNCiAgICAgICAgICAgIHRoaXMuZmV0Y2hQcm9kdWN0KHRoaXMucHJvZHVjdC5pZCk7DQogICAgICAgICAgfQ0KICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgY29uc29sZS5lcnJvcigi5pS26JeP5pON5L2c5byC5bi477yaIiwgZXJyb3IpOw0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIA0KICAgICAgY2xlYXJCYW5uZXIoKSB7DQogICAgICAgIGlmICh0aGlzLmtleUludGVydmFsKSB7DQogICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmtleUludGVydmFsKTsNCiAgICAgICAgICB0aGlzLmtleUludGVydmFsID0gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIA0KICAgICAgc3RhcnRCYW5uZXIoKSB7DQogICAgICAgIHRoaXMua2V5SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5jb3ZlckluZGV4ID0gKHRoaXMuY292ZXJJbmRleCArIDEpICUgdGhpcy5jb3Zlckxpc3QubGVuZ3RoOw0KICAgICAgICAgIHRoaXMuY292ZXJJdGVtID0gdGhpcy5jb3Zlckxpc3RbdGhpcy5jb3ZlckluZGV4XTsNCiAgICAgICAgfSwgNTAwMCk7DQogICAgICB9LA0KICAgICAgDQogICAgICBjb3ZlclRvTGVmdCgpIHsNCiAgICAgICAgdGhpcy5jb3ZlckluZGV4ID0gKHRoaXMuY292ZXJJbmRleCAtIDEgKyB0aGlzLmNvdmVyTGlzdC5sZW5ndGgpICUgdGhpcy5jb3Zlckxpc3QubGVuZ3RoOw0KICAgICAgICB0aGlzLmNvdmVySXRlbSA9IHRoaXMuY292ZXJMaXN0W3RoaXMuY292ZXJJbmRleF07DQogICAgICB9LA0KICAgICAgDQogICAgICBjb3ZlclRvUmlnaHQoKSB7DQogICAgICAgIHRoaXMuY292ZXJJbmRleCA9ICh0aGlzLmNvdmVySW5kZXggKyAxKSAlIHRoaXMuY292ZXJMaXN0Lmxlbmd0aDsNCiAgICAgICAgdGhpcy5jb3Zlckl0ZW0gPSB0aGlzLmNvdmVyTGlzdFt0aGlzLmNvdmVySW5kZXhdOw0KICAgICAgfSwNCiAgICAgIA0KICAgICAgY292ZXJTZWxlY3RlZChjb3Zlckl0ZW0sIGluZGV4KSB7DQogICAgICAgIHRoaXMuY292ZXJJdGVtID0gY292ZXJJdGVtOw0KICAgICAgICB0aGlzLmNvdmVySW5kZXggPSBpbmRleDsNCiAgICAgIH0sDQogICAgICANCiAgICAgIGdldFBhcmFtKCkgew0KICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Ow0KICAgICAgICB0aGlzLnByb2R1Y3RJZCA9IE51bWJlcihwYXJhbS5wcm9kdWN0SWQpOw0KICAgICAgICB0aGlzLmZldGNoUHJvZHVjdCh0aGlzLnByb2R1Y3RJZCk7DQogICAgICB9LA0KICAgICAgDQogICAgICBjb3Zlckxpc3RQYXJzZShwcm9kdWN0KSB7DQogICAgICAgIGlmICghcHJvZHVjdC5jb3Zlckxpc3QpIHJldHVybjsNCiAgICAgICAgDQogICAgICAgIHRoaXMuY292ZXJMaXN0ID0gcHJvZHVjdC5jb3Zlckxpc3Quc3BsaXQoJywnKTsNCiAgICAgICAgdGhpcy5jb3Zlckl0ZW0gPSB0aGlzLmNvdmVyTGlzdFswXTsNCiAgICAgICAgdGhpcy5zdGFydEJhbm5lcigpOw0KICAgICAgfSwNCiAgICAgIA0KICAgICAgZmV0Y2hQcm9kdWN0KHByb2R1Y3RJZCkgew0KICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCcvcHJvZHVjdC9xdWVyeScsIHsgaWQ6IHByb2R1Y3RJZCB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXM7DQogICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICB0aGlzLnByb2R1Y3QgPSBkYXRhLmRhdGFbMF07DQogICAgICAgICAgICB0aGlzLmNvdmVyTGlzdFBhcnNlKHRoaXMucHJvZHVjdCk7DQogICAgICAgICAgICB0aGlzLnF1ZXJ5U2F2ZVN0YXR1cygpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuWVhuWTgeafpeivouW8guW4uO+8miIsIGVycm9yKTsNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9DQogIH0NCiAg"},{"version":3,"sources":["ProductDetail.vue"],"names":[],"mappings":";AAwLA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductDetail.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n    <div class=\"product-detail\">\r\n      <!-- 商品主区域 -->\r\n      <div class=\"product-main\">\r\n        <!-- 商品图片展示区 -->\r\n        <div class=\"product-gallery\">\r\n          <!-- 缩略图列表 -->\r\n          <div class=\"thumbnail-list\">\r\n            <div\r\n              v-for=\"(coverItem, index) in coverList\"\r\n              :key=\"index\"\r\n              class=\"thumbnail-item\"\r\n              :class=\"{ active: coverIndex === index }\"\r\n              @click=\"coverSelected(coverItem, index)\"\r\n            >\r\n              <img :src=\"coverItem\" alt=\"商品缩略图\">\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 主图展示 -->\r\n          <div class=\"main-image-container\">\r\n            <transition name=\"fade\" mode=\"out-in\">\r\n              <img \r\n                :key=\"coverItem\"\r\n                :src=\"coverItem\" \r\n                alt=\"商品主图\"\r\n                class=\"main-image\"\r\n              >\r\n            </transition>\r\n            \r\n            <!-- 导航箭头 -->\r\n            <div class=\"image-nav\">\r\n              <div class=\"nav-arrow left\" @click=\"coverToLeft\">\r\n                <i class=\"el-icon-arrow-left\"></i>\r\n              </div>\r\n              <div class=\"nav-arrow right\" @click=\"coverToRight\">\r\n                <i class=\"el-icon-arrow-right\"></i>\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- 砍价标签 -->\r\n            <div class=\"bargain-tag\" v-if=\"product.isBargain\">\r\n              支持砍价\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- 商品信息区 -->\r\n        <div class=\"product-info\">\r\n          <h1 class=\"product-title\">{{ product.name }}</h1>\r\n          \r\n          <!-- 价格信息 -->\r\n          <div class=\"price-section\">\r\n            <span class=\"price\">\r\n              <span class=\"symbol\">¥</span>\r\n              <span class=\"value\">{{ product.price }}</span>\r\n            </span>\r\n            \r\n            <div class=\"meta-info\">\r\n              <span class=\"category\">{{ product.categoryName }}</span>\r\n              <span class=\"condition\">{{ product.oldLevel }}成新</span>\r\n              <span class=\"inventory\">库存 {{ product.inventory }}件</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 用户互动数据 -->\r\n          <div class=\"interaction-stats\">\r\n            <div class=\"stat-item\">\r\n              <i class=\"el-icon-view\"></i>\r\n              <span>{{ product.viewNumber }}人浏览</span>\r\n            </div>\r\n            <div class=\"stat-item\">\r\n              <i class=\"el-icon-star-off\"></i>\r\n              <span>{{ product.saveNumber }}人收藏</span>\r\n            </div>\r\n            <div class=\"stat-item\">\r\n              <i class=\"el-icon-sell\"></i>\r\n              <span>{{ product.likeNumber }}人想要</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 卖家信息 -->\r\n          <div class=\"seller-info\">\r\n            <el-avatar :src=\"product.userAvatar\" size=\"medium\"></el-avatar>\r\n            <span class=\"seller-name\">{{ product.userName }}</span>\r\n          </div>\r\n          \r\n          <!-- 操作按钮 -->\r\n          <div class=\"action-buttons\">\r\n            <el-button \r\n              type=\"warning\" \r\n              icon=\"el-icon-star-off\" \r\n              @click=\"saveOperation\"\r\n              :class=\"{ 'is-saved': saveFlag }\"\r\n            >\r\n              {{ saveFlag ? '已收藏' : '收藏' }}\r\n            </el-button>\r\n            \r\n            <el-button \r\n              type=\"primary\" \r\n              icon=\"el-icon-sell\" \r\n              @click=\"likeProduct\"\r\n            >\r\n              我想要\r\n            </el-button>\r\n            \r\n            <el-button \r\n              type=\"danger\" \r\n              icon=\"el-icon-shopping-cart-2\" \r\n              @click=\"buyProduct\"\r\n            >\r\n              立即购买\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 商品详情 -->\r\n      <div class=\"product-detail-content\">\r\n        <h2 class=\"section-title\">商品详情</h2>\r\n        <div class=\"detail-html\" v-html=\"product.detail\"></div>\r\n      </div>\r\n      \r\n      <!-- 商品评价 -->\r\n      <div class=\"product-reviews\" v-if=\"userInfo !== null\">\r\n        <h2 class=\"section-title\">商品评价</h2>\r\n        <Evaluations contentType=\"PRODUCT\" :contentId=\"product.id\" />\r\n      </div>\r\n      \r\n      <!-- 购买对话框 -->\r\n      <el-dialog \r\n        :visible.sync=\"dialogProductOperaion\" \r\n        title=\"确认订单\"\r\n        width=\"500px\"\r\n        center\r\n      >\r\n        <div class=\"order-dialog\">\r\n          <div class=\"product-info\">\r\n            <div class=\"price-section\">\r\n              <span class=\"price\">\r\n                <span class=\"symbol\">¥</span>\r\n                <span class=\"value\">{{ product.price }}</span>\r\n              </span>\r\n              <span class=\"inventory\">库存 {{ product.inventory }}件</span>\r\n            </div>\r\n            <h3 class=\"product-title\">{{ product.name }}</h3>\r\n            <div class=\"seller-info\">\r\n              <el-avatar :src=\"product.userAvatar\" size=\"small\"></el-avatar>\r\n              <span class=\"seller-name\">{{ product.userName }}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"order-form\">\r\n            <div class=\"form-item\">\r\n              <label>购买数量</label>\r\n              <el-input-number \r\n                v-model=\"buyNumber\" \r\n                :min=\"1\" \r\n                :max=\"product.inventory\"\r\n                controls-position=\"right\"\r\n              ></el-input-number>\r\n            </div>\r\n            \r\n            <div class=\"form-item\">\r\n              <label>备注信息</label>\r\n              <el-input\r\n                type=\"textarea\"\r\n                :rows=\"3\"\r\n                placeholder=\"请输入备注信息（选填）\"\r\n                v-model=\"detail\"\r\n              ></el-input>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"cannelBuy\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"buyConfirm\">确认下单</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { getUserInfo } from \"@/utils/storage\"\r\n  import Evaluations from \"@/components/Evaluations\"\r\n  \r\n  export default {\r\n    components: { Evaluations },\r\n    name: 'ProductDetail',\r\n    data() {\r\n      return {\r\n        productId: null,\r\n        product: {},\r\n        coverList: [],\r\n        coverIndex: 0,\r\n        coverItem: null,\r\n        keyInterval: null,\r\n        saveFlag: false,\r\n        dialogProductOperaion: false,\r\n        buyNumber: 1,\r\n        detail: '',\r\n        userInfo: null\r\n      }\r\n    },\r\n    created() {\r\n      this.getParam();\r\n      this.viewOperation();\r\n    },\r\n    beforeDestroy() {\r\n      this.clearBanner();\r\n    },\r\n    methods: {\r\n\r\n      viewOperation() {\r\n        const userInfo = getUserInfo();\r\n        if (!userInfo) return;\r\n        \r\n        this.userInfo = userInfo;\r\n        this.$axios.post(`/interaction/view/${this.productId}`).catch(error => {\r\n          console.error(\"浏览记录异常：\", error);\r\n        })\r\n      },\r\n      \r\n      buyConfirm() {\r\n        const ordersDTO = {\r\n          productId: this.product.id,\r\n          buyNumber: this.buyNumber,\r\n          detail: this.detail\r\n        }\r\n        \r\n        this.$axios.post(`/product/buyProduct`, ordersDTO).then(res => {\r\n          const { data } = res;\r\n          if (data.code === 200) {\r\n            this.$message.success(data.msg);\r\n            this.fetchProduct(this.product.id);\r\n            this.cannelBuy();\r\n          } else {\r\n            this.$message.error(data.msg);\r\n          }\r\n        }).catch(error => {\r\n          this.$message.error('下单失败');\r\n          console.error(\"商品下单异常：\", error);\r\n        })\r\n      },\r\n      \r\n      cannelBuy() {\r\n        this.dialogProductOperaion = false;\r\n        this.buyNumber = 1;\r\n        this.detail = '';\r\n      },\r\n      \r\n      buyProduct() {\r\n        this.dialogProductOperaion = true;\r\n      },\r\n      \r\n      likeProduct() {\r\n        this.$axios.post(`/interaction/likeProduct/${this.product.id}`).then(res => {\r\n          const { data } = res;\r\n          if (data.code === 200) {\r\n            this.$message.success(data.msg);\r\n            this.fetchProduct(this.product.id);\r\n          } else {\r\n            this.$message.info(data.msg);\r\n          }\r\n        }).catch(error => {\r\n          console.error(\"商品想要异常：\", error);\r\n        })\r\n      },\r\n      \r\n      querySaveStatus() {\r\n        const userInfo = getUserInfo();\r\n        if (!userInfo) return;\r\n        \r\n        const interactionQueryDto = {\r\n          userId: userInfo.id,\r\n          productId: this.product.id,\r\n          type: 1\r\n        };\r\n        \r\n        this.$axios.post('/interaction/query', interactionQueryDto).then(res => {\r\n          const { data } = res;\r\n          if (data.code === 200) {\r\n            this.saveFlag = data.total !== 0;\r\n          }\r\n        }).catch(error => {\r\n          console.error(\"收藏状态查询异常：\", error);\r\n        })\r\n      },\r\n      \r\n      saveOperation() {\r\n        this.$axios.post(`/interaction/saveOperation/${this.product.id}`).then(res => {\r\n          const { data } = res;\r\n          if (data.code === 200) {\r\n            this.saveFlag = data.data;\r\n            this.$message.success(data.msg);\r\n            this.fetchProduct(this.product.id);\r\n          }\r\n        }).catch(error => {\r\n          console.error(\"收藏操作异常：\", error);\r\n        })\r\n      },\r\n      \r\n      clearBanner() {\r\n        if (this.keyInterval) {\r\n          clearInterval(this.keyInterval);\r\n          this.keyInterval = null;\r\n        }\r\n      },\r\n      \r\n      startBanner() {\r\n        this.keyInterval = setInterval(() => {\r\n          this.coverIndex = (this.coverIndex + 1) % this.coverList.length;\r\n          this.coverItem = this.coverList[this.coverIndex];\r\n        }, 5000);\r\n      },\r\n      \r\n      coverToLeft() {\r\n        this.coverIndex = (this.coverIndex - 1 + this.coverList.length) % this.coverList.length;\r\n        this.coverItem = this.coverList[this.coverIndex];\r\n      },\r\n      \r\n      coverToRight() {\r\n        this.coverIndex = (this.coverIndex + 1) % this.coverList.length;\r\n        this.coverItem = this.coverList[this.coverIndex];\r\n      },\r\n      \r\n      coverSelected(coverItem, index) {\r\n        this.coverItem = coverItem;\r\n        this.coverIndex = index;\r\n      },\r\n      \r\n      getParam() {\r\n        const param = this.$route.query;\r\n        this.productId = Number(param.productId);\r\n        this.fetchProduct(this.productId);\r\n      },\r\n      \r\n      coverListParse(product) {\r\n        if (!product.coverList) return;\r\n        \r\n        this.coverList = product.coverList.split(',');\r\n        this.coverItem = this.coverList[0];\r\n        this.startBanner();\r\n      },\r\n      \r\n      fetchProduct(productId) {\r\n        this.$axios.post('/product/query', { id: productId }).then(res => {\r\n          const { data } = res;\r\n          if (data.code === 200) {\r\n            this.product = data.data[0];\r\n            this.coverListParse(this.product);\r\n            this.querySaveStatus();\r\n          }\r\n        }).catch(error => {\r\n          console.error(\"商品查询异常：\", error);\r\n        })\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped lang=\"scss\">\r\n  .product-detail {\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n    \r\n    .product-main {\r\n      display: flex;\r\n      gap: 40px;\r\n      margin-bottom: 40px;\r\n      \r\n      .product-gallery {\r\n        width: 480px;\r\n        display: flex;\r\n        gap: 20px;\r\n        \r\n        .thumbnail-list {\r\n          width: 80px;\r\n          \r\n          .thumbnail-item {\r\n            width: 80px;\r\n            height: 80px;\r\n            margin-bottom: 10px;\r\n            border: 1px solid #e5e5e5;\r\n            border-radius: 4px;\r\n            overflow: hidden;\r\n            cursor: pointer;\r\n            transition: all 0.3s;\r\n            \r\n            &.active {\r\n              border-color: #ff6b6b;\r\n            }\r\n            \r\n            &:hover {\r\n              border-color: #ff6b6b;\r\n            }\r\n            \r\n            img {\r\n              width: 100%;\r\n              height: 100%;\r\n              object-fit: cover;\r\n            }\r\n          }\r\n        }\r\n        \r\n        .main-image-container {\r\n          flex: 1;\r\n          position: relative;\r\n          \r\n          .main-image {\r\n            width: 100%;\r\n            height: 400px;\r\n            object-fit: contain;\r\n            border-radius: 4px;\r\n            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n          }\r\n          \r\n          .image-nav {\r\n            position: absolute;\r\n            top: 50%;\r\n            left: 0;\r\n            right: 0;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            transform: translateY(-50%);\r\n            \r\n            .nav-arrow {\r\n              width: 40px;\r\n              height: 40px;\r\n              background-color: rgba(255, 255, 255, 0.8);\r\n              border-radius: 50%;\r\n              display: flex;\r\n              align-items: center;\r\n              justify-content: center;\r\n              cursor: pointer;\r\n              transition: all 0.3s;\r\n              \r\n              &:hover {\r\n                background-color: rgba(255, 107, 107, 0.8);\r\n                color: white;\r\n              }\r\n              \r\n              i {\r\n                font-size: 18px;\r\n                font-weight: bold;\r\n              }\r\n            }\r\n          }\r\n          \r\n          .bargain-tag {\r\n            position: absolute;\r\n            top: 10px;\r\n            left: 10px;\r\n            background-color: #ffcc00;\r\n            color: #333;\r\n            font-size: 12px;\r\n            font-weight: bold;\r\n            padding: 4px 10px;\r\n            border-radius: 12px;\r\n            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n          }\r\n        }\r\n      }\r\n      \r\n      .product-info {\r\n        flex: 1;\r\n        \r\n        .product-title {\r\n          font-size: 24px;\r\n          color: #333;\r\n          margin-bottom: 20px;\r\n          font-weight: 600;\r\n        }\r\n        \r\n        .price-section {\r\n          margin-bottom: 20px;\r\n          padding-bottom: 20px;\r\n          border-bottom: 1px solid #f0f0f0;\r\n          \r\n          .price {\r\n            display: block;\r\n            margin-bottom: 10px;\r\n            \r\n            .symbol {\r\n              font-size: 16px;\r\n            }\r\n            \r\n            .value {\r\n              font-size: 28px;\r\n              font-weight: bold;\r\n              color: #ff4f24;\r\n            }\r\n          }\r\n          \r\n          .meta-info {\r\n            display: flex;\r\n            gap: 15px;\r\n            font-size: 14px;\r\n            color: #666;\r\n            \r\n            span {\r\n              position: relative;\r\n              \r\n              &:not(:last-child)::after {\r\n                content: \"\";\r\n                position: absolute;\r\n                right: -8px;\r\n                top: 50%;\r\n                transform: translateY(-50%);\r\n                width: 4px;\r\n                height: 4px;\r\n                background-color: #999;\r\n                border-radius: 50%;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        \r\n        .interaction-stats {\r\n          display: flex;\r\n          gap: 20px;\r\n          margin-bottom: 20px;\r\n          \r\n          .stat-item {\r\n            display: flex;\r\n            align-items: center;\r\n            font-size: 14px;\r\n            color: #666;\r\n            \r\n            i {\r\n              margin-right: 5px;\r\n              font-size: 16px;\r\n            }\r\n          }\r\n        }\r\n        \r\n        .seller-info {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 10px;\r\n          margin-bottom: 30px;\r\n          \r\n          .seller-name {\r\n            font-size: 14px;\r\n            color: #333;\r\n          }\r\n        }\r\n        \r\n        .action-buttons {\r\n          display: flex;\r\n          gap: 15px;\r\n          \r\n          .el-button {\r\n            flex: 1;\r\n            height: 46px;\r\n            font-size: 16px;\r\n            \r\n            &.is-saved {\r\n              background-color: #67c23a;\r\n              border-color: #67c23a;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    .product-detail-content,\r\n    .product-reviews {\r\n      background-color: #fff;\r\n      border-radius: 8px;\r\n      padding: 20px;\r\n      margin-bottom: 20px;\r\n      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n      \r\n      .section-title {\r\n        font-size: 18px;\r\n        color: #333;\r\n        margin-bottom: 20px;\r\n        padding-bottom: 10px;\r\n        border-bottom: 1px solid #f0f0f0;\r\n      }\r\n      \r\n      .detail-html {\r\n        line-height: 1.6;\r\n        \r\n        img {\r\n          max-width: 100%;\r\n          height: auto;\r\n        }\r\n      }\r\n    }\r\n    \r\n    .order-dialog {\r\n      .product-info {\r\n        margin-bottom: 20px;\r\n        padding-bottom: 20px;\r\n        border-bottom: 1px solid #f0f0f0;\r\n        \r\n        .product-title {\r\n          font-size: 16px;\r\n          margin: 10px 0;\r\n        }\r\n        \r\n        .seller-info {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          margin-top: 10px;\r\n          \r\n          .seller-name {\r\n            font-size: 14px;\r\n            color: #666;\r\n          }\r\n        }\r\n      }\r\n      \r\n      .form-item {\r\n        margin-bottom: 20px;\r\n        \r\n        label {\r\n          display: block;\r\n          margin-bottom: 8px;\r\n          font-size: 14px;\r\n          color: #666;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  .fade-enter-active, .fade-leave-active {\r\n    transition: opacity 0.5s;\r\n  }\r\n  .fade-enter, .fade-leave-to {\r\n    opacity: 0;\r\n  }\r\n  </style>"]}]}