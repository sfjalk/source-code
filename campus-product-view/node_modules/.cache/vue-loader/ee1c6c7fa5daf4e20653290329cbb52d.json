{"remainingRequest":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/user/PostContent.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/user/PostContent.vue","mtime":1758037356566},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/babel-loader/lib/index.js","mtime":1767024830795},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js","mtime":1767024826361}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgRWRpdG9yIGZyb20gIkAvY29tcG9uZW50cy9FZGl0b3IiDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogeyBFZGl0b3IgfSwNCiAgbmFtZTogJ1Bvc3RDb250ZW50JywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcHVibGlzaGluZzogZmFsc2UsDQogICAgICBjb250ZW50OiB7DQogICAgICAgIG5hbWU6ICcnLA0KICAgICAgICBkZXRhaWw6ICcnLA0KICAgICAgICBjb3ZlcjogJycNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcykgew0KICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCiAgICAgICAgdGhpcy5jb250ZW50LmNvdmVyID0gcmVzLmRhdGE7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5bCB6Z2i5Zu+54mH5LiK5Lyg5oiQ5YqfJyk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLHotKUnKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgYXN5bmMgcG9zdENvbnRlbnQoKSB7DQogICAgICBpZiAoIXRoaXMuY29udGVudC5uYW1lKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36L6T5YWl5qCH6aKYJyk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgaWYgKCF0aGlzLmNvbnRlbnQuY292ZXIpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fkuIrkvKDlsIHpnaLlm77niYcnKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICB0aGlzLnB1Ymxpc2hpbmcgPSB0cnVlOw0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kYXhpb3MucG9zdCgnL2NvbnRlbnQvc2F2ZScsIHRoaXMuY29udGVudCk7DQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WPkeW4g+aIkOWKnycpOw0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbXljb250ZW50Jyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKHJlcy5kYXRhLm1zZyB8fCAn5Y+R5biD5aSx6LSlJyk7DQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoIuWPkeW4g+WKqOaAgeW8guW4uDoiLCBlcnJvcik7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WPkeW4g+Wksei0pScpOw0KICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgdGhpcy5wdWJsaXNoaW5nID0gZmFsc2U7DQogICAgICB9DQogICAgfSwNCg0KICAgIG9uUmVjZWl2ZShkZXRhaWwpIHsNCiAgICAgIHRoaXMuY29udGVudC5kZXRhaWwgPSBkZXRhaWw7DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["PostContent.vue"],"names":[],"mappings":";AAsDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"PostContent.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n  <div class=\"content-publish-container\">\r\n    <!-- 主标题 -->\r\n    <h1 class=\"publish-title\">发布动态</h1>\r\n\r\n    <!-- 两栏布局 -->\r\n    <div class=\"publish-layout\">\r\n      <!-- 左侧表单区域 -->\r\n      <div class=\"form-section\">\r\n        <!-- 动态基本信息卡片 -->\r\n        <div class=\"form-card\">\r\n          <h2 class=\"card-title\">动态基本信息</h2>\r\n\r\n          <div class=\"form-group\">\r\n            <label class=\"form-label\">标题</label>\r\n            <el-input v-model=\"content.name\" placeholder=\"请输入标题\" class=\"form-input\" clearable></el-input>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 右侧上传和编辑区域 -->\r\n      <div class=\"upload-section\">\r\n        <div class=\"form-card\">\r\n          <h2 class=\"card-title\">封面图片</h2>\r\n          <el-upload \r\n            class=\"avatar-uploader\" \r\n            action=\"http://localhost:21090/api/campus-product-sys/v1.0/file/upload\"\r\n            :show-file-list=\"false\" \r\n            :on-success=\"handleAvatarSuccess\">\r\n            <img v-if=\"content.cover\" :src=\"content.cover\" class=\"avatar\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </div>\r\n\r\n        <!-- 动态详情编辑器 -->\r\n        <div class=\"form-card\">\r\n          <h2 class=\"card-title\">动态详情</h2>\r\n          <Editor height=\"400px\" :receiveContent=\"content.detail\" @on-receive=\"onReceive\" />\r\n        </div>\r\n\r\n        <!-- 发布按钮 -->\r\n        <el-button \r\n          type=\"primary\" \r\n          @click=\"postContent\" \r\n          class=\"publish-button\" \r\n          :loading=\"publishing\">\r\n          立即发布\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Editor from \"@/components/Editor\"\r\n\r\nexport default {\r\n  components: { Editor },\r\n  name: 'PostContent',\r\n  data() {\r\n    return {\r\n      publishing: false,\r\n      content: {\r\n        name: '',\r\n        detail: '',\r\n        cover: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleAvatarSuccess(res) {\r\n      if (res.code === 200) {\r\n        this.content.cover = res.data;\r\n        this.$message.success('封面图片上传成功');\r\n      } else {\r\n        this.$message.error('上传失败');\r\n      }\r\n    },\r\n\r\n    async postContent() {\r\n      if (!this.content.name) {\r\n        this.$message.warning('请输入标题');\r\n        return;\r\n      }\r\n      \r\n      if (!this.content.cover) {\r\n        this.$message.warning('请上传封面图片');\r\n        return;\r\n      }\r\n\r\n      this.publishing = true;\r\n      try {\r\n        const res = await this.$axios.post('/content/save', this.content);\r\n        if (res.data.code === 200) {\r\n          this.$message.success('发布成功');\r\n          this.$router.push('/mycontent');\r\n        } else {\r\n          this.$message.warning(res.data.msg || '发布失败');\r\n        }\r\n      } catch (error) {\r\n        console.error(\"发布动态异常:\", error);\r\n        this.$message.error('发布失败');\r\n      } finally {\r\n        this.publishing = false;\r\n      }\r\n    },\r\n\r\n    onReceive(detail) {\r\n      this.content.detail = detail;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.content-publish-container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n\r\n  .publish-title {\r\n    font-size: 24px;\r\n    color: #333;\r\n    margin-bottom: 30px;\r\n    text-align: center;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .publish-layout {\r\n    display: flex;\r\n    gap: 20px;\r\n\r\n    .form-section {\r\n      flex: 1;\r\n      min-width: 400px;\r\n    }\r\n\r\n    .upload-section {\r\n      flex: 1;\r\n      min-width: 400px;\r\n    }\r\n  }\r\n\r\n  .form-card {\r\n    background-color: #fff;\r\n    border-radius: 12px;\r\n    padding: 20px;\r\n    margin-bottom: 20px;\r\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);\r\n\r\n    .card-title {\r\n      font-size: 18px;\r\n      color: #333;\r\n      margin-bottom: 20px;\r\n      font-weight: 600;\r\n      position: relative;\r\n      padding-left: 10px;\r\n\r\n      &::before {\r\n        content: '';\r\n        position: absolute;\r\n        left: 0;\r\n        top: 4px;\r\n        height: 16px;\r\n        width: 4px;\r\n        background-color: #409EFF;\r\n        border-radius: 2px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .form-group {\r\n    margin-bottom: 20px;\r\n\r\n    .form-label {\r\n      display: block;\r\n      font-size: 14px;\r\n      color: #606266;\r\n      margin-bottom: 10px;\r\n      font-weight: 500;\r\n    }\r\n\r\n    .form-input {\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  .avatar-uploader {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-bottom: 20px;\r\n\r\n    .avatar {\r\n      width: 200px;\r\n      height: 150px;\r\n      object-fit: cover;\r\n      border-radius: 6px;\r\n    }\r\n\r\n    .avatar-uploader-icon {\r\n      width: 200px;\r\n      height: 150px;\r\n      line-height: 150px;\r\n      text-align: center;\r\n      border: 1px dashed #d9d9d9;\r\n      border-radius: 6px;\r\n      color: #8c939d;\r\n      font-size: 28px;\r\n      transition: all 0.3s;\r\n\r\n      &:hover {\r\n        border-color: #409EFF;\r\n      }\r\n    }\r\n  }\r\n\r\n  .publish-button {\r\n    width: 100%;\r\n    height: 50px;\r\n    font-size: 16px;\r\n    margin-top: 20px;\r\n    border-radius: 8px;\r\n    background: linear-gradient(90deg, #409EFF, #66b1ff);\r\n    border: none;\r\n    box-shadow: 0 4px 12px rgba(64, 158, 255, 0.3);\r\n    transition: all 0.3s;\r\n\r\n    &:hover {\r\n      transform: translateY(-2px);\r\n      box-shadow: 0 6px 16px rgba(64, 158, 255, 0.4);\r\n    }\r\n\r\n    &:active {\r\n      transform: translateY(0);\r\n    }\r\n  }\r\n}\r\n\r\n@media (max-width: 992px) {\r\n  .publish-layout {\r\n    flex-direction: column;\r\n\r\n    .form-section,\r\n    .upload-section {\r\n      min-width: 100% !important;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}