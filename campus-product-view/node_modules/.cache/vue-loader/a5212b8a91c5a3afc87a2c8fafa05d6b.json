{"remainingRequest":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/user/ResetPwd.vue?vue&type=style&index=0&id=688ae4a8&scoped=true&lang=scss","dependencies":[{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/user/ResetPwd.vue","mtime":1758037355233},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/css-loader/dist/cjs.js","mtime":1767024825496},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1767024828942},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/postcss-loader/src/index.js","mtime":1767024825763},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/sass-loader/dist/cjs.js","mtime":1767024829398},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js","mtime":1767024826361}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5wYXNzd29yZC1yZXNldC1jb250YWluZXIgewogIG1heC13aWR0aDogNTAwcHg7CiAgbWFyZ2luOiAwIGF1dG87CiAgcGFkZGluZzogMzBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGJvcmRlci1yYWRpdXM6IDhweDsKICBib3gtc2hhZG93OiAwIDJweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKfQoKLmZvcm0tbGFiZWwgewogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbi1ib3R0b206IDhweDsKICBmb250LXNpemU6IDE0cHg7CiAgY29sb3I6ICM2MDYyNjY7CiAgZm9udC13ZWlnaHQ6IDUwMDsKfQoKLmZvcm0taXRlbSB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoKLnBhc3N3b3JkLWlucHV0IHsKICB3aWR0aDogMTAwJTsKfQoKLnBhc3N3b3JkLXRpcHMgewogIG1hcmdpbjogMjBweCAwOwogIHBhZGRpbmc6IDEwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgZm9udC1zaXplOiAxM3B4OwogIGNvbG9yOiAjOTA5Mzk5OwoKICBwIHsKICAgIG1hcmdpbi1ib3R0b206IDVweDsKICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgfQoKICB1bCB7CiAgICBtYXJnaW46IDA7CiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7CiAgfQp9Cgouc3VibWl0LWJ0biB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIG1hcmdpbi10b3A6IDMwcHg7CgogIC5lbC1idXR0b24gewogICAgd2lkdGg6IDIwMHB4OwogICAgcGFkZGluZzogMTJweCAwOwogICAgZm9udC1zaXplOiAxNnB4OwogIH0KfQo="},{"version":3,"sources":["ResetPwd.vue"],"names":[],"mappings":";AA6NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ResetPwd.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n    <div class=\"password-reset-container\">\r\n      <!-- 密码修改表单 -->\r\n      <div class=\"password-form\">\r\n        <!-- 原始密码 -->\r\n        <div class=\"form-item\">\r\n          <label class=\"form-label\">*原始密码</label>\r\n          <el-input\r\n            v-model=\"oldPwd\"\r\n            type=\"password\"\r\n            placeholder=\"请输入原始密码\"\r\n            show-password\r\n            clearable\r\n            class=\"password-input\"\r\n          ></el-input>\r\n        </div>\r\n  \r\n        <!-- 新密码 -->\r\n        <div class=\"form-item\">\r\n          <label class=\"form-label\">*新密码</label>\r\n          <el-input\r\n            v-model=\"newPwd\"\r\n            type=\"password\"\r\n            placeholder=\"请输入新密码\"\r\n            show-password\r\n            clearable\r\n            class=\"password-input\"\r\n          ></el-input>\r\n        </div>\r\n  \r\n        <!-- 确认密码 -->\r\n        <div class=\"form-item\">\r\n          <label class=\"form-label\">*确认密码</label>\r\n          <el-input\r\n            v-model=\"againPwd\"\r\n            type=\"password\"\r\n            placeholder=\"请再次输入新密码\"\r\n            show-password\r\n            clearable\r\n            class=\"password-input\"\r\n            @keyup.enter.native=\"postInfo\"\r\n          ></el-input>\r\n        </div>\r\n  \r\n        <!-- 密码强度提示 -->\r\n        <div class=\"password-tips\">\r\n          <p>密码要求：</p>\r\n          <ul>\r\n            <li>长度8-20个字符</li>\r\n            <li>包含字母和数字</li>\r\n            <li>建议使用特殊字符增加安全性</li>\r\n          </ul>\r\n        </div>\r\n  \r\n        <!-- 提交按钮 -->\r\n        <div class=\"submit-btn\">\r\n          <el-button\r\n            type=\"primary\"\r\n            round\r\n            @click=\"postInfo\"\r\n            :loading=\"submitting\"\r\n            :disabled=\"!formValid\"\r\n          >\r\n            立即修改\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { clearToken } from \"@/utils/storage\";\r\n  \r\n  export default {\r\n    name: \"ResetPwd\",\r\n    data() {\r\n      return {\r\n        oldPwd: \"\",\r\n        newPwd: \"\",\r\n        againPwd: \"\",\r\n        submitting: false\r\n      };\r\n    },\r\n    computed: {\r\n      formValid() {\r\n        return (\r\n          this.oldPwd.length >= 8 &&\r\n          this.newPwd.length >= 8 &&\r\n          this.againPwd.length >= 8 &&\r\n          this.newPwd === this.againPwd\r\n        );\r\n      }\r\n    },\r\n    methods: {\r\n      // 提交密码修改\r\n      async postInfo() {\r\n        if (!this.validatePassword()) {\r\n          return;\r\n        }\r\n  \r\n        this.submitting = true;\r\n  \r\n        try {\r\n          const userUpdatePwdDTO = {\r\n            oldPwd: this.$md5(this.$md5(this.oldPwd)),\r\n            newPwd: this.$md5(this.$md5(this.newPwd)),\r\n            againPwd: this.$md5(this.$md5(this.againPwd))\r\n          };\r\n  \r\n          const { data } = await this.$axios.put(\"/user/updatePwd\", userUpdatePwdDTO);\r\n  \r\n          this.$notify({\r\n            duration: 2000,\r\n            title: \"修改密码\",\r\n            message: data.code === 200 ? \"修改成功，请重新登录\" : data.msg,\r\n            type: data.code === 200 ? \"success\" : \"error\"\r\n          });\r\n  \r\n          if (data.code === 200) {\r\n            clearToken();\r\n            this.$router.push(\"/login\");\r\n          }\r\n        } catch (error) {\r\n          console.error(\"密码修改失败:\", error);\r\n          this.$notify.error({\r\n            title: \"错误\",\r\n            message: \"密码修改失败，请稍后重试\"\r\n          });\r\n        } finally {\r\n          this.submitting = false;\r\n        }\r\n      },\r\n  \r\n      // 密码验证\r\n      validatePassword() {\r\n        if (this.oldPwd.length < 8) {\r\n          this.$message.warning(\"原始密码长度不能少于8位\");\r\n          return false;\r\n        }\r\n  \r\n        if (this.newPwd.length < 8) {\r\n          this.$message.warning(\"新密码长度不能少于8位\");\r\n          return false;\r\n        }\r\n  \r\n        if (this.newPwd !== this.againPwd) {\r\n          this.$message.warning(\"两次输入的新密码不一致\");\r\n          return false;\r\n        }\r\n  \r\n        // 密码强度验证\r\n        const hasNumber = /\\d/.test(this.newPwd);\r\n        const hasLetter = /[a-zA-Z]/.test(this.newPwd);\r\n  \r\n        if (!hasNumber || !hasLetter) {\r\n          this.$message.warning(\"密码应包含字母和数字\");\r\n          return false;\r\n        }\r\n  \r\n        return true;\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped lang=\"scss\">\r\n  .password-reset-container {\r\n    max-width: 500px;\r\n    margin: 0 auto;\r\n    padding: 30px;\r\n    background-color: #fff;\r\n    border-radius: 8px;\r\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .form-label {\r\n    display: block;\r\n    margin-bottom: 8px;\r\n    font-size: 14px;\r\n    color: #606266;\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .form-item {\r\n    margin-bottom: 20px;\r\n  }\r\n  \r\n  .password-input {\r\n    width: 100%;\r\n  }\r\n  \r\n  .password-tips {\r\n    margin: 20px 0;\r\n    padding: 10px;\r\n    background-color: #f8f8f8;\r\n    border-radius: 4px;\r\n    font-size: 13px;\r\n    color: #909399;\r\n  \r\n    p {\r\n      margin-bottom: 5px;\r\n      font-weight: 500;\r\n    }\r\n  \r\n    ul {\r\n      margin: 0;\r\n      padding-left: 20px;\r\n    }\r\n  }\r\n  \r\n  .submit-btn {\r\n    text-align: center;\r\n    margin-top: 30px;\r\n  \r\n    .el-button {\r\n      width: 200px;\r\n      padding: 12px 0;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n  </style>"]}]}