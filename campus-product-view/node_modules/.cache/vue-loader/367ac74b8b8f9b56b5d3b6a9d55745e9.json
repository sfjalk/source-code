{"remainingRequest":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/admin/User.vue?vue&type=style&index=0&id=8a1b0276&scoped=true&lang=scss","dependencies":[{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/admin/User.vue","mtime":1758037359905},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/css-loader/dist/cjs.js","mtime":1767024825496},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1767024828942},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/postcss-loader/src/index.js","mtime":1767024825763},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/sass-loader/dist/cjs.js","mtime":1767024829398},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js","mtime":1767024826361}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoudXNlci1tYW5hZ2VtZW50LWNvbnRhaW5lciB7DQogIHBhZGRpbmc6IDIwcHggMDsNCg0KICAuc2VhcmNoLWNhcmQgew0KICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNlYmVlZjU7DQoNCiAgICAuc2VhcmNoLWNvbnRlbnQgew0KICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgfQ0KICB9DQoNCiAgLnVzZXItY2FyZHMtY29udGFpbmVyIHsNCiAgICBkaXNwbGF5OiBncmlkOw0KICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDI4MHB4LCAxZnIpKTsNCiAgICBnYXA6IDE2cHg7DQogICAgbWFyZ2luLWJvdHRvbTogMjBweDsNCg0KICAgIC51c2VyLWNhcmQgew0KICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsNCg0KICAgICAgJjpob3ZlciB7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtM3B4KTsNCiAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogICAgICB9DQoNCiAgICAgIC51c2VyLWhlYWRlciB7DQogICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7DQoNCiAgICAgICAgLnVzZXItaW5mbyB7DQogICAgICAgICAgbWFyZ2luLWxlZnQ6IDEycHg7DQoNCiAgICAgICAgICAudXNlci1uYW1lIHsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7DQogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLnVzZXItYWNjb3VudCB7DQogICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICBjb2xvcjogIzkwOTM5OTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLnVzZXItZGV0YWlscyB7DQogICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7DQoNCiAgICAgICAgLmRldGFpbC1pdGVtIHsNCiAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4Ow0KICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICBjb2xvcjogIzYwNjI2NjsNCg0KICAgICAgICAgIGkgew0KICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7DQogICAgICAgICAgICBjb2xvcjogIzkwOTM5OTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLnVzZXItc3RhdHVzIHsNCiAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICBnYXA6IDZweDsNCiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsNCiAgICAgIH0NCg0KICAgICAgLnVzZXItYWN0aW9ucyB7DQogICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7DQogICAgICAgIGdhcDogNnB4Ow0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIC5wYWdpbmF0aW9uLWFyZWEgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogIH0NCg0KICAuYXZhdGFyLXVwbG9hZGVyIHsNCiAgICA6OnYtZGVlcCAuZWwtdXBsb2FkIHsNCiAgICAgIGJvcmRlcjogMXB4IGRhc2hlZCAjZDlkOWQ5Ow0KICAgICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCg0KICAgICAgJjpob3ZlciB7DQogICAgICAgIGJvcmRlci1jb2xvcjogIzQwOUVGRjsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAuYXZhdGFyLXVwbG9hZGVyLWljb24gew0KICAgICAgZm9udC1zaXplOiAyOHB4Ow0KICAgICAgY29sb3I6ICM4YzkzOWQ7DQogICAgICB3aWR0aDogMTIwcHg7DQogICAgICBoZWlnaHQ6IDEyMHB4Ow0KICAgICAgbGluZS1oZWlnaHQ6IDEyMHB4Ow0KICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIH0NCg0KICAgIC5hdmF0YXIgew0KICAgICAgd2lkdGg6IDEyMHB4Ow0KICAgICAgaGVpZ2h0OiAxMjBweDsNCiAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["User.vue"],"names":[],"mappings":";AA4bA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n  <div class=\"user-management-container\">\r\n    <!-- 搜索卡片 -->\r\n    <el-card class=\"search-card\" shadow=\"never\">\r\n      <div class=\"search-content\">\r\n        <el-select v-model=\"userQueryDto.isLogin\" placeholder=\"登录状态\" size=\"medium\"\r\n          style=\"width: 120px; margin-right: 12px;\" @change=\"fetchFreshData\" clearable>\r\n          <el-option v-for=\"item in loginStatuList\" :key=\"item.value\" :label=\"item.label\"\r\n            :value=\"item.value\"></el-option>\r\n        </el-select>\r\n\r\n        <el-select v-model=\"userQueryDto.isWord\" placeholder=\"禁言状态\" size=\"medium\"\r\n          style=\"width: 120px; margin-right: 12px;\" @change=\"fetchFreshData\" clearable>\r\n          <el-option v-for=\"item in wordStatuList\" :key=\"item.value\" :label=\"item.label\"\r\n            :value=\"item.value\"></el-option>\r\n        </el-select>\r\n\r\n        <el-date-picker v-model=\"searchTime\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"注册开始日期\"\r\n          end-placeholder=\"注册结束日期\" size=\"medium\" style=\"width: 360px; margin-right: 12px;\" @change=\"fetchFreshData\"\r\n          value-format=\"yyyy-MM-dd\" :picker-options=\"pickerOptions\"></el-date-picker>\r\n\r\n        <el-input v-model=\"userQueryDto.userName\" placeholder=\"请输入用户名\" clearable size=\"medium\" style=\"width: 220px;\"\r\n          @clear=\"handleFilterClear\" @keyup.enter=\"handleFilter\">\r\n          <template #append>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\"></el-button>\r\n          </template>\r\n        </el-input>\r\n\r\n        <el-button type=\"primary\" class=\"customer\" icon=\"el-icon-plus\" style=\"margin-left: 12px;\"\r\n          @click=\"add\">新增用户</el-button>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 用户卡片容器 -->\r\n    <div class=\"user-cards-container\">\r\n      <el-card v-for=\"(user, index) in tableData\" :key=\"index\" class=\"user-card\" shadow=\"hover\">\r\n        <div class=\"user-header\">\r\n          <el-avatar :src=\"user.userAvatar || 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png'\"\r\n            size=\"medium\"></el-avatar>\r\n          <div class=\"user-info\">\r\n            <div class=\"user-name\">{{ user.userName }}</div>\r\n            <div class=\"user-account\">{{ user.userAccount }}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"user-details\">\r\n          <div class=\"detail-item\">\r\n            <i class=\"el-icon-message\"></i>\r\n            <span>{{ user.userEmail || '未设置' }}</span>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <i class=\"el-icon-time\"></i>\r\n            <span>{{ formatTime(user.createTime) }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"user-status\">\r\n          <el-tag :type=\"user.userRole === 1 ? 'danger' : 'success'\" size=\"small\">\r\n            {{ user.userRole === 1 ? '管理员' : '用户' }}\r\n          </el-tag>\r\n\r\n          <el-tag :type=\"user.isLogin ? 'danger' : 'success'\" size=\"small\">\r\n            {{ user.isLogin ? '已封号' : '账号状态正常' }}\r\n          </el-tag>\r\n\r\n          <el-tag :type=\"user.isWord ? 'warning' : 'success'\" size=\"small\">\r\n            {{ user.isWord ? '已禁言' : '留言状态正常' }}\r\n          </el-tag>\r\n        </div>\r\n\r\n        <div class=\"user-actions\">\r\n          <el-tooltip content=\"修改状态\" placement=\"top\">\r\n            <el-button type=\"primary\" icon=\"el-icon-setting\" circle size=\"mini\" @click=\"handleStatus(user)\"></el-button>\r\n          </el-tooltip>\r\n\r\n          <el-tooltip content=\"编辑用户\" placement=\"top\">\r\n            <el-button type=\"warning\" icon=\"el-icon-edit\" circle size=\"mini\" @click=\"handleEdit(user)\"></el-button>\r\n          </el-tooltip>\r\n\r\n          <el-tooltip content=\"删除用户\" placement=\"top\">\r\n            <el-button type=\"danger\" icon=\"el-icon-delete\" circle size=\"mini\" @click=\"handleDelete(user)\"></el-button>\r\n          </el-tooltip>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <!-- 分页区域 -->\r\n    <div class=\"pagination-area\">\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\"\r\n        :page-sizes=\"[12, 24, 48, 96]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"totalItems\"></el-pagination>\r\n    </div>\r\n\r\n    <!-- 用户操作对话框 -->\r\n    <el-dialog :title=\"isOperation ? '编辑用户' : '新增用户'\" :visible.sync=\"dialogUserOperaion\" width=\"500px\"\r\n      :close-on-click-modal=\"false\">\r\n      <el-form label-width=\"80px\">\r\n        <el-form-item label=\"用户头像\">\r\n          <el-upload class=\"avatar-uploader\" action=\"http://localhost:21090/api/campus-product-sys/v1.0/file/upload\"\r\n            :show-file-list=\"false\" :on-success=\"handleAvatarSuccess\">\r\n            <img v-if=\"userAvatar\" :src=\"userAvatar\" class=\"avatar\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"用户名\">\r\n          <el-input style=\"width: 90%;\" v-model=\"data.userName\" placeholder=\"请输入用户名\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"账号\">\r\n          <el-input style=\"width: 90%;\" v-model=\"data.userAccount\" placeholder=\"请输入账号\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"邮箱\">\r\n          <el-input style=\"width: 90%;\" v-model=\"data.userEmail\" placeholder=\"请输入邮箱\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"密码\">\r\n          <el-input style=\"width: 90%;\" v-model=\"userPwd\" type=\"password\" placeholder=\"请输入密码\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button class=\"customer\" @click=\"cannel\">取 消</el-button>\r\n        <el-button class=\"customer\" type=\"primary\" @click=\"isOperation ? updateOperation() : addOperation()\">\r\n          确 定\r\n        </el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 状态设置对话框 -->\r\n    <el-dialog title=\"用户状态设置\" :visible.sync=\"dialogStatusOperation\" width=\"400px\" :close-on-click-modal=\"false\">\r\n      <el-form label-width=\"120px\">\r\n        <el-form-item label=\"封号状态\">\r\n          <el-switch v-model=\"data.isLogin\" active-text=\"封号\" inactive-text=\"正常\"></el-switch>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"禁言状态\">\r\n          <el-switch v-model=\"data.isWord\" active-text=\"禁言\" inactive-text=\"正常\"></el-switch>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"管理员设置\">\r\n          <el-switch v-model=\"isAdmin\" active-text=\"管理员\" inactive-text=\"普通用户\"></el-switch>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cannel\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"comfirmStatus\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      userPwd: '',\r\n      userAvatar: '',\r\n      data: {},\r\n      filterText: '',\r\n      isAdmin: false,\r\n      currentPage: 1,\r\n      pageSize: 12,\r\n      totalItems: 0,\r\n      dialogStatusOperation: false,\r\n      dialogUserOperaion: false,\r\n      isOperation: false,\r\n      tableData: [],\r\n      searchTime: [],\r\n      selectedRows: [],\r\n      status: null,\r\n      userQueryDto: {},\r\n      loginStatuList: [\r\n        { value: null, label: '全部' },\r\n        { value: 0, label: '正常' },\r\n        { value: 1, label: '封号' }\r\n      ],\r\n      wordStatuList: [\r\n        { value: null, label: '全部' },\r\n        { value: 0, label: '正常' },\r\n        { value: 1, label: '禁言' }\r\n      ],\r\n      rolesList: [\r\n        { value: null, label: '全部' },\r\n        { value: 2, label: '用户' },\r\n        { value: 1, label: '管理员' }\r\n      ],\r\n      pickerOptions: {\r\n        disabledDate(time) {\r\n          return time.getTime() > Date.now();\r\n        },\r\n        shortcuts: [\r\n          {\r\n            text: '最近一周',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          },\r\n          {\r\n            text: '最近一个月',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          },\r\n          {\r\n            text: '最近三个月',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchFreshData();\r\n  },\r\n  methods: {\r\n    formatTime(time) {\r\n      if (!time) return '';\r\n      const date = new Date(time);\r\n      return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`;\r\n    },\r\n\r\n    cannel() {\r\n      this.data = {};\r\n      this.userAvatar = '';\r\n      this.userPwd = '';\r\n      this.dialogUserOperaion = false;\r\n      this.dialogStatusOperation = false;\r\n      this.isOperation = false;\r\n    },\r\n\r\n    comfirmStatus() {\r\n      const userUpdateDto = {\r\n        id: this.data.id,\r\n        isLogin: this.data.isLogin,\r\n        userRole: this.isAdmin ? 1 : 2,\r\n        isWord: this.data.isWord\r\n      };\r\n\r\n      this.$axios.put(`/user/backUpdate`, userUpdateDto)\r\n        .then(res => {\r\n          if (res.data.code === 200) {\r\n            this.$message.success('状态修改成功');\r\n            this.cannel();\r\n            this.fetchFreshData();\r\n          } else {\r\n            this.$message.error(res.data.msg || '状态修改失败');\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error(\"修改状态异常:\", error);\r\n          this.$message.error('状态修改异常');\r\n        });\r\n    },\r\n\r\n    handleStatus(data) {\r\n      this.isAdmin = data.userRole === 1;\r\n      this.dialogStatusOperation = true;\r\n      this.data = { ...data };\r\n    },\r\n\r\n    handleAvatarSuccess(res, file) {\r\n      if (res.code === 200) {\r\n        this.userAvatar = res.data;\r\n        this.$message.success('头像上传成功');\r\n      } else {\r\n        this.$message.error('头像上传失败');\r\n      }\r\n    },\r\n\r\n    async batchDelete() {\r\n      if (!this.selectedRows.length) {\r\n        this.$message.warning('请至少选择一条数据');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const confirmed = await this.$confirm(\r\n          `确认删除选中的${this.selectedRows.length}条用户数据吗？删除后不可恢复！`,\r\n          '删除确认',\r\n          {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }\r\n        );\r\n\r\n        if (confirmed) {\r\n          const ids = this.selectedRows.map(item => item.id);\r\n          const response = await this.$axios.post(`/user/batchDelete`, ids);\r\n\r\n          if (response.data.code === 200) {\r\n            this.$message.success('删除成功');\r\n            this.fetchFreshData();\r\n            this.selectedRows = [];\r\n          } else {\r\n            this.$message.error(response.data.msg || '删除失败');\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('删除用户异常:', error);\r\n        this.$message.error('删除操作异常');\r\n      }\r\n    },\r\n\r\n    async updateOperation() {\r\n      if (this.userPwd !== '') {\r\n        const pwd = this.$md5(this.$md5(this.userPwd));\r\n        this.data.userPwd = pwd;\r\n      } else {\r\n        this.data.userPwd = null;\r\n      }\r\n      this.data.userAvatar = this.userAvatar;\r\n\r\n      try {\r\n        const response = await this.$axios.put('/user/backUpdate', this.data);\r\n        if (response.data.code === 200) {\r\n          this.$message.success('用户信息修改成功');\r\n          this.cannel();\r\n          this.fetchFreshData();\r\n        } else {\r\n          this.$message.error(response.data.msg || '修改失败');\r\n        }\r\n      } catch (error) {\r\n        console.error('修改出错:', error);\r\n        this.$message.error('修改异常');\r\n      }\r\n    },\r\n\r\n    async addOperation() {\r\n      if (this.userPwd !== '') {\r\n        this.data.userPwd = this.$md5(this.$md5(this.userPwd));\r\n      } else {\r\n        this.data.userPwd = null;\r\n      }\r\n      this.data.userAvatar = this.userAvatar;\r\n\r\n      try {\r\n        const response = await this.$axios.post('/user/insert', this.data);\r\n        if (response.data.code === 200) {\r\n          this.$message.success('用户新增成功');\r\n          this.cannel();\r\n          this.fetchFreshData();\r\n        } else {\r\n          this.$message.error(response.data.msg || '新增失败');\r\n        }\r\n      } catch (error) {\r\n        console.error('信息新增出错:', error);\r\n        this.$message.error('提交失败，请稍后再试！');\r\n      }\r\n    },\r\n\r\n    async fetchFreshData() {\r\n      try {\r\n        let startTime = '';\r\n        let endTime = '';\r\n        if (this.searchTime && this.searchTime.length === 2) {\r\n          startTime = `${this.searchTime[0]}T00:00:00`;\r\n          endTime = `${this.searchTime[1]}T23:59:59`;\r\n        }\r\n\r\n        const params = {\r\n          current: this.currentPage,\r\n          size: this.pageSize,\r\n          key: this.filterText,\r\n          startTime: startTime,\r\n          endTime: endTime,\r\n          ...this.userQueryDto\r\n        };\r\n\r\n        const response = await this.$axios.post('/user/query', params);\r\n        const { data } = response;\r\n\r\n        if (data.code === 200) {\r\n          this.tableData = data.data;\r\n          this.totalItems = data.total;\r\n        } else {\r\n          this.$message.error(data.msg || '查询失败');\r\n        }\r\n      } catch (error) {\r\n        console.error('查询用户信息异常:', error);\r\n        this.$message.error('查询操作异常');\r\n      }\r\n    },\r\n\r\n    add() {\r\n      this.dialogUserOperaion = true;\r\n      this.isOperation = false;\r\n      this.data = {};\r\n      this.userAvatar = '';\r\n      this.userPwd = '';\r\n    },\r\n\r\n    handleFilter() {\r\n      this.currentPage = 1;\r\n      this.fetchFreshData();\r\n    },\r\n\r\n    handleFilterClear() {\r\n      this.filterText = '';\r\n      this.handleFilter();\r\n    },\r\n\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.currentPage = 1;\r\n      this.fetchFreshData();\r\n    },\r\n\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      this.fetchFreshData();\r\n    },\r\n\r\n    handleEdit(row) {\r\n      this.dialogUserOperaion = true;\r\n      this.isOperation = true;\r\n      this.userAvatar = row.userAvatar;\r\n      this.data = { ...row };\r\n      this.userPwd = '';\r\n    },\r\n\r\n    handleDelete(row) {\r\n      this.selectedRows = [row];\r\n      this.batchDelete();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.user-management-container {\r\n  padding: 20px 0;\r\n\r\n  .search-card {\r\n    margin-bottom: 20px;\r\n    border-radius: 8px;\r\n    border: 1px solid #ebeef5;\r\n\r\n    .search-content {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n  }\r\n\r\n  .user-cards-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n    gap: 16px;\r\n    margin-bottom: 20px;\r\n\r\n    .user-card {\r\n      border-radius: 8px;\r\n      transition: all 0.3s ease;\r\n\r\n      &:hover {\r\n        transform: translateY(-3px);\r\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n      }\r\n\r\n      .user-header {\r\n        display: flex;\r\n        align-items: center;\r\n        margin-bottom: 12px;\r\n\r\n        .user-info {\r\n          margin-left: 12px;\r\n\r\n          .user-name {\r\n            font-weight: 500;\r\n            font-size: 16px;\r\n          }\r\n\r\n          .user-account {\r\n            font-size: 12px;\r\n            color: #909399;\r\n          }\r\n        }\r\n      }\r\n\r\n      .user-details {\r\n        margin-bottom: 12px;\r\n\r\n        .detail-item {\r\n          display: flex;\r\n          align-items: center;\r\n          margin-bottom: 6px;\r\n          font-size: 13px;\r\n          color: #606266;\r\n\r\n          i {\r\n            margin-right: 8px;\r\n            color: #909399;\r\n          }\r\n        }\r\n      }\r\n\r\n      .user-status {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        gap: 6px;\r\n        margin-bottom: 12px;\r\n      }\r\n\r\n      .user-actions {\r\n        display: flex;\r\n        justify-content: flex-end;\r\n        gap: 6px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .pagination-area {\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n\r\n  .avatar-uploader {\r\n    ::v-deep .el-upload {\r\n      border: 1px dashed #d9d9d9;\r\n      border-radius: 6px;\r\n      cursor: pointer;\r\n      position: relative;\r\n      overflow: hidden;\r\n\r\n      &:hover {\r\n        border-color: #409EFF;\r\n      }\r\n    }\r\n\r\n    .avatar-uploader-icon {\r\n      font-size: 28px;\r\n      color: #8c939d;\r\n      width: 120px;\r\n      height: 120px;\r\n      line-height: 120px;\r\n      text-align: center;\r\n    }\r\n\r\n    .avatar {\r\n      width: 120px;\r\n      height: 120px;\r\n      display: block;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}