{"remainingRequest":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/babel-loader/lib/index.js!/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/user/Myself.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/user/Myself.vue","mtime":1758037357372},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/babel.config.js","mtime":1758037366702},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/babel-loader/lib/index.js","mtime":1767024830795},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js","mtime":1767024826361}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlc2V0UHdkIGZyb20gJ0Avdmlld3MvdXNlci9SZXNldFB3ZCc7CmltcG9ydCBTZWxmIGZyb20gJ0Avdmlld3MvdXNlci9TZWxmJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFJlc2V0UHdkLAogICAgU2VsZgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRlZmF1bHRBdmF0YXI6ICdodHRwczovL2N1YmUuZWxlbWVjZG4uY29tLzMvN2MvM2VhNmJlZWM2NDM2OWMyNjQyYjkyYzY3MjZmMWVwbmcucG5nJywKICAgICAgLy8g5L2/55SoRWxlbWVudCBVSeaPkOS+m+eahOm7mOiupOWktOWDjwogICAgICB1c2VySW5mbzoge30sCiAgICAgIGFjdGl2ZUdvb2RzOiB7fSwKICAgICAgYWN0aXZlTmF2OiAncHJvZmlsZScsCiAgICAgIG5hdkl0ZW1zOiBbewogICAgICAgIGtleTogJ3Byb2ZpbGUnLAogICAgICAgIHRpdGxlOiAn5Liq5Lq66LWE5paZJywKICAgICAgICBpY29uOiAnZWwtaWNvbi11c2VyJywKICAgICAgICBjb21wb25lbnQ6ICdTZWxmJwogICAgICB9LCB7CiAgICAgICAga2V5OiAnc2VjdXJpdHknLAogICAgICAgIHRpdGxlOiAn6LSm5oi35a6J5YWoJywKICAgICAgICBpY29uOiAnZWwtaWNvbi1sb2NrJywKICAgICAgICBjb21wb25lbnQ6ICdSZXNldFB3ZCcKICAgICAgfSwgewogICAgICAgIGtleTogJ2xvZ291dCcsCiAgICAgICAgdGl0bGU6ICfpgIDlh7rnmbvlvZUnLAogICAgICAgIGljb246ICdlbC1pY29uLXN3aXRjaC1idXR0b24nLAogICAgICAgIGNvbXBvbmVudDogbnVsbAogICAgICB9XQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjdXJyZW50Q29tcG9uZW50KCkgewogICAgICBjb25zdCBpdGVtID0gdGhpcy5uYXZJdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5rZXkgPT09IHRoaXMuYWN0aXZlTmF2KTsKICAgICAgcmV0dXJuIGl0ZW0gPyBpdGVtLmNvbXBvbmVudCA6IG51bGw7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaFVzZXJJbmZvKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBmZXRjaFVzZXJJbmZvKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgnL3VzZXIvYXV0aCcpOwogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMudXNlckluZm8gPSByZXMuZGF0YS5kYXRhOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bnlKjmiLfkv6Hmga/lpLHotKU6JywgZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgdXBkYXRlVXNlckluZm8oKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kYXhpb3MucHV0KCcvdXNlci91cGRhdGUnLCB0aGlzLnVzZXJJbmZvKTsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7fQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPlueUqOaIt+S/oeaBr+Wksei0pTonLCBlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICBzd2l0Y2hOYXYobmF2S2V5KSB7CiAgICAgIGlmIChuYXZLZXkgPT09ICdsb2dvdXQnKSB7CiAgICAgICAgdGhpcy5sb2dvdXQoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5hY3RpdmVOYXYgPSBuYXZLZXk7CiAgICB9LAogICAgbG9nb3V0KCkgewogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrpropoHpgIDlh7rnmbvlvZXlkJc/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5bey6YCA5Ye655m75b2VJyk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUF2YXRhclN1Y2Nlc3MocmVzKSB7CiAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgdGhpcy51c2VySW5mby51c2VyQXZhdGFyID0gcmVzLmRhdGE7CiAgICAgICAgdGhpcy4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICB0aXRsZTogJ+WktOWDj+S4iuS8oCcsCiAgICAgICAgICBtZXNzYWdlOiAn5LiK5Lyg5oiQ5YqfJwogICAgICAgIH0pOwogICAgICAgIHRoaXMudXBkYXRlVXNlckluZm8oKTsKICAgICAgICB0aGlzLmZldGNoVXNlckluZm8oKTsKICAgICAgfQogICAgfSwKICAgIGJlZm9yZUF2YXRhclVwbG9hZChmaWxlKSB7CiAgICAgIGNvbnN0IGlzSlBHID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZycgfHwgZmlsZS50eXBlID09PSAnaW1hZ2UvcG5nJzsKICAgICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwogICAgICBpZiAoIWlzSlBHKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5Y+q6IO95pivIEpQRy9QTkcg5qC85byPIScpOwogICAgICB9CiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKTsKICAgICAgfQogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDJNOwogICAgfQogIH0KfTs="},{"version":3,"names":["ResetPwd","Self","components","data","defaultAvatar","userInfo","activeGoods","activeNav","navItems","key","title","icon","component","computed","currentComponent","item","find","created","fetchUserInfo","methods","res","$axios","get","code","error","console","updateUserInfo","put","switchNav","navKey","logout","$confirm","confirmButtonText","cancelButtonText","type","then","sessionStorage","clear","$router","push","$message","success","handleAvatarSuccess","userAvatar","$notify","duration","message","beforeAvatarUpload","file","isJPG","isLt2M","size"],"sources":["src/views/user/Myself.vue"],"sourcesContent":["<template>\r\n    <div class=\"user-center\">\r\n        <!-- 用户信息头部 -->\r\n        <div class=\"user-header\">\r\n            <div class=\"user-avatar\">\r\n                <img :src=\"userInfo.userAvatar || defaultAvatar\" alt=\"用户头像\">\r\n                <el-upload class=\"avatar-uploader\"\r\n                    action=\"http://localhost:21090/api/campus-product-sys/v1.0/file/upload\" :show-file-list=\"false\"\r\n                    :on-success=\"handleAvatarSuccess\" :before-upload=\"beforeAvatarUpload\">\r\n                    <i class=\"el-icon-camera-solid\"></i>\r\n                </el-upload>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 主内容区 -->\r\n        <div class=\"user-main\">\r\n            <!-- 左侧导航 -->\r\n            <div class=\"user-nav\">\r\n                <div v-for=\"(item, index) in navItems\" :key=\"index\" class=\"nav-item\"\r\n                    :class=\"{ 'active': activeNav === item.key }\" @click=\"switchNav(item.key)\">\r\n                    <i :class=\"item.icon\"></i>\r\n                    <span>{{ item.title }}</span>\r\n                    <i class=\"el-icon-arrow-right\"></i>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- 右侧内容 -->\r\n            <div class=\"user-content\">\r\n                <transition name=\"fade\" mode=\"out-in\">\r\n                    <keep-alive>\r\n                        <component :is=\"currentComponent\"></component>\r\n                    </keep-alive>\r\n                </transition>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport ResetPwd from '@/views/user/ResetPwd'\r\nimport Self from '@/views/user/Self'\r\n\r\nexport default {\r\n    components: { ResetPwd, Self },\r\n    data() {\r\n        return {\r\n            defaultAvatar: 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png', // 使用Element UI提供的默认头像\r\n            userInfo: {},\r\n            activeGoods: {},\r\n            activeNav: 'profile',\r\n            navItems: [\r\n                { key: 'profile', title: '个人资料', icon: 'el-icon-user', component: 'Self' },\r\n                { key: 'security', title: '账户安全', icon: 'el-icon-lock', component: 'ResetPwd' },\r\n                { key: 'logout', title: '退出登录', icon: 'el-icon-switch-button', component: null }\r\n            ]\r\n        }\r\n    },\r\n    computed: {\r\n        currentComponent() {\r\n            const item = this.navItems.find(item => item.key === this.activeNav);\r\n            return item ? item.component : null;\r\n        }\r\n    },\r\n    created() {\r\n        this.fetchUserInfo()\r\n    },\r\n    methods: {\r\n        async fetchUserInfo() {\r\n            try {\r\n                const res = await this.$axios.get('/user/auth')\r\n                if (res.data.code === 200) {\r\n                    this.userInfo = res.data.data;\r\n\r\n                }\r\n            } catch (error) {\r\n                console.error('获取用户信息失败:', error)\r\n            }\r\n        },\r\n\r\n        async updateUserInfo() {\r\n            try {\r\n                const res = await this.$axios.put('/user/update',this.userInfo)\r\n                if (res.data.code === 200) {\r\n                    \r\n                }\r\n            } catch (error) {\r\n                console.error('获取用户信息失败:', error)\r\n            }\r\n        },\r\n\r\n        switchNav(navKey) {\r\n            if (navKey === 'logout') {\r\n                this.logout()\r\n                return\r\n            }\r\n            this.activeNav = navKey\r\n        },\r\n\r\n        logout() {\r\n            this.$confirm('确定要退出登录吗?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                sessionStorage.clear()\r\n                this.$router.push('/login')\r\n                this.$message.success('已退出登录')\r\n            })\r\n        },\r\n\r\n        handleAvatarSuccess(res) {\r\n            if (res.code === 200) {\r\n                this.userInfo.userAvatar = res.data\r\n                this.$notify.success({\r\n                    duration: 1000,\r\n                    title: '头像上传',\r\n                    message: '上传成功'\r\n                });\r\n                this.updateUserInfo();\r\n                this.fetchUserInfo();\r\n            }\r\n        },\r\n\r\n        beforeAvatarUpload(file) {\r\n            const isJPG = file.type === 'image/jpeg' || file.type === 'image/png'\r\n            const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n            if (!isJPG) {\r\n                this.$message.error('上传头像图片只能是 JPG/PNG 格式!')\r\n            }\r\n            if (!isLt2M) {\r\n                this.$message.error('上传头像图片大小不能超过 2MB!')\r\n            }\r\n            return isJPG && isLt2M\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.user-center {\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n    background-color: #fff;\r\n    border-radius: 12px;\r\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.user-header {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 30px;\r\n    background: linear-gradient(135deg, #409EFF, #66b1ff);\r\n    border-radius: 12px;\r\n    color: #fff;\r\n    margin-bottom: 30px;\r\n    position: relative;\r\n    overflow: hidden;\r\n\r\n    &::before {\r\n        content: '';\r\n        position: absolute;\r\n        top: -50px;\r\n        right: -50px;\r\n        width: 200px;\r\n        height: 200px;\r\n        background-color: rgba(255, 255, 255, 0.1);\r\n        border-radius: 50%;\r\n    }\r\n}\r\n\r\n.user-avatar {\r\n    width: 100px;\r\n    height: 100px;\r\n    border-radius: 50%;\r\n    border: 4px solid rgba(255, 255, 255, 0.3);\r\n    position: relative;\r\n    margin-right: 30px;\r\n\r\n    img {\r\n        width: 100%;\r\n        height: 100%;\r\n        border-radius: 50%;\r\n        object-fit: cover;\r\n    }\r\n\r\n    .avatar-uploader {\r\n        position: absolute;\r\n        bottom: 0;\r\n        right: 0;\r\n        background-color: #fff;\r\n        width: 32px;\r\n        height: 32px;\r\n        border-radius: 50%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\r\n        cursor: pointer;\r\n\r\n        i {\r\n            color: #409EFF;\r\n            font-size: 16px;\r\n        }\r\n    }\r\n}\r\n\r\n.user-info {\r\n    flex: 1;\r\n\r\n    h2 {\r\n        font-size: 24px;\r\n        margin: 0 0 5px;\r\n        font-weight: 600;\r\n    }\r\n\r\n    .user-id {\r\n        font-size: 14px;\r\n        opacity: 0.8;\r\n        margin: 0 0 15px;\r\n    }\r\n}\r\n\r\n.user-stats {\r\n    display: flex;\r\n    gap: 30px;\r\n\r\n    .stat-item {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n\r\n        .stat-value {\r\n            font-size: 20px;\r\n            font-weight: 600;\r\n            margin-bottom: 5px;\r\n        }\r\n\r\n        .stat-label {\r\n            font-size: 14px;\r\n            opacity: 0.9;\r\n        }\r\n    }\r\n}\r\n\r\n.user-main {\r\n    display: flex;\r\n    gap: 20px;\r\n}\r\n\r\n.user-nav {\r\n    width: 240px;\r\n    background-color: #fff;\r\n    border-radius: 8px;\r\n    padding: 10px 0;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n\r\n    .nav-item {\r\n        display: flex;\r\n        align-items: center;\r\n        padding: 15px 20px;\r\n        cursor: pointer;\r\n        transition: all 0.3s;\r\n        border-left: 3px solid transparent;\r\n\r\n        i:first-child {\r\n            margin-right: 10px;\r\n            font-size: 18px;\r\n            color: #606266;\r\n        }\r\n\r\n        span {\r\n            flex: 1;\r\n            font-size: 16px;\r\n            color: #303133;\r\n        }\r\n\r\n        i:last-child {\r\n            color: #909399;\r\n            font-size: 14px;\r\n        }\r\n\r\n        &:hover {\r\n            background-color: #f5f7fa;\r\n            border-left-color: #409EFF;\r\n\r\n            i:first-child,\r\n            span {\r\n                color: #409EFF;\r\n            }\r\n        }\r\n\r\n        &.active {\r\n            background-color: #ecf5ff;\r\n            border-left-color: #409EFF;\r\n\r\n            i:first-child,\r\n            span {\r\n                color: #409EFF;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.user-content {\r\n    flex: 1;\r\n    min-height: 600px;\r\n    background-color: #fff;\r\n    border-radius: 8px;\r\n    padding: 20px;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n    transition: opacity 0.3s;\r\n}\r\n\r\n.fade-enter,\r\n.fade-leave-to {\r\n    opacity: 0;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n    .user-header {\r\n        flex-direction: column;\r\n        text-align: center;\r\n        padding: 20px;\r\n\r\n        .user-avatar {\r\n            margin-right: 0;\r\n            margin-bottom: 15px;\r\n        }\r\n    }\r\n\r\n    .user-stats {\r\n        justify-content: center;\r\n        gap: 15px;\r\n    }\r\n\r\n    .user-main {\r\n        flex-direction: column;\r\n    }\r\n\r\n    .user-nav {\r\n        width: 100%;\r\n        margin-bottom: 15px;\r\n    }\r\n}\r\n</style>"],"mappings":"AAuCA,OAAAA,QAAA;AACA,OAAAC,IAAA;AAEA;EACAC,UAAA;IAAAF,QAAA;IAAAC;EAAA;EACAE,KAAA;IACA;MACAC,aAAA;MAAA;MACAC,QAAA;MACAC,WAAA;MACAC,SAAA;MACAC,QAAA,GACA;QAAAC,GAAA;QAAAC,KAAA;QAAAC,IAAA;QAAAC,SAAA;MAAA,GACA;QAAAH,GAAA;QAAAC,KAAA;QAAAC,IAAA;QAAAC,SAAA;MAAA,GACA;QAAAH,GAAA;QAAAC,KAAA;QAAAC,IAAA;QAAAC,SAAA;MAAA;IAEA;EACA;EACAC,QAAA;IACAC,iBAAA;MACA,MAAAC,IAAA,QAAAP,QAAA,CAAAQ,IAAA,CAAAD,IAAA,IAAAA,IAAA,CAAAN,GAAA,UAAAF,SAAA;MACA,OAAAQ,IAAA,GAAAA,IAAA,CAAAH,SAAA;IACA;EACA;EACAK,QAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IACA,MAAAD,cAAA;MACA;QACA,MAAAE,GAAA,cAAAC,MAAA,CAAAC,GAAA;QACA,IAAAF,GAAA,CAAAjB,IAAA,CAAAoB,IAAA;UACA,KAAAlB,QAAA,GAAAe,GAAA,CAAAjB,IAAA,CAAAA,IAAA;QAEA;MACA,SAAAqB,KAAA;QACAC,OAAA,CAAAD,KAAA,cAAAA,KAAA;MACA;IACA;IAEA,MAAAE,eAAA;MACA;QACA,MAAAN,GAAA,cAAAC,MAAA,CAAAM,GAAA,sBAAAtB,QAAA;QACA,IAAAe,GAAA,CAAAjB,IAAA,CAAAoB,IAAA,WAEA;MACA,SAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,cAAAA,KAAA;MACA;IACA;IAEAI,UAAAC,MAAA;MACA,IAAAA,MAAA;QACA,KAAAC,MAAA;QACA;MACA;MACA,KAAAvB,SAAA,GAAAsB,MAAA;IACA;IAEAC,OAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAC,IAAA;QACAC,cAAA,CAAAC,KAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;QACA,KAAAC,QAAA,CAAAC,OAAA;MACA;IACA;IAEAC,oBAAAtB,GAAA;MACA,IAAAA,GAAA,CAAAG,IAAA;QACA,KAAAlB,QAAA,CAAAsC,UAAA,GAAAvB,GAAA,CAAAjB,IAAA;QACA,KAAAyC,OAAA,CAAAH,OAAA;UACAI,QAAA;UACAnC,KAAA;UACAoC,OAAA;QACA;QACA,KAAApB,cAAA;QACA,KAAAR,aAAA;MACA;IACA;IAEA6B,mBAAAC,IAAA;MACA,MAAAC,KAAA,GAAAD,IAAA,CAAAd,IAAA,qBAAAc,IAAA,CAAAd,IAAA;MACA,MAAAgB,MAAA,GAAAF,IAAA,CAAAG,IAAA;MAEA,KAAAF,KAAA;QACA,KAAAT,QAAA,CAAAhB,KAAA;MACA;MACA,KAAA0B,MAAA;QACA,KAAAV,QAAA,CAAAhB,KAAA;MACA;MACA,OAAAyB,KAAA,IAAAC,MAAA;IACA;EACA;AACA","ignoreList":[]}]}