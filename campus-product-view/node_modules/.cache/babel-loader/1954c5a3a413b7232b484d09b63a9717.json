{"remainingRequest":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/babel-loader/lib/index.js!/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/user/ResetPwd.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/src/views/user/ResetPwd.vue","mtime":1758037355233},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/babel.config.js","mtime":1758037366702},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/babel-loader/lib/index.js","mtime":1767024830795},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/cache-loader/dist/cjs.js","mtime":1767024828976},{"path":"/Users/macos/Downloads/campus-system/source code/campus-product-view/node_modules/vue-loader/lib/index.js","mtime":1767024826361}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY2xlYXJUb2tlbiB9IGZyb20gIkAvdXRpbHMvc3RvcmFnZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVzZXRQd2QiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvbGRQd2Q6ICIiLAogICAgICBuZXdQd2Q6ICIiLAogICAgICBhZ2FpblB3ZDogIiIsCiAgICAgIHN1Ym1pdHRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZvcm1WYWxpZCgpIHsKICAgICAgcmV0dXJuIHRoaXMub2xkUHdkLmxlbmd0aCA+PSA4ICYmIHRoaXMubmV3UHdkLmxlbmd0aCA+PSA4ICYmIHRoaXMuYWdhaW5Qd2QubGVuZ3RoID49IDggJiYgdGhpcy5uZXdQd2QgPT09IHRoaXMuYWdhaW5Qd2Q7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmj5DkuqTlr4bnoIHkv67mlLkKICAgIGFzeW5jIHBvc3RJbmZvKCkgewogICAgICBpZiAoIXRoaXMudmFsaWRhdGVQYXNzd29yZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuc3VibWl0dGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgdXNlclVwZGF0ZVB3ZERUTyA9IHsKICAgICAgICAgIG9sZFB3ZDogdGhpcy4kbWQ1KHRoaXMuJG1kNSh0aGlzLm9sZFB3ZCkpLAogICAgICAgICAgbmV3UHdkOiB0aGlzLiRtZDUodGhpcy4kbWQ1KHRoaXMubmV3UHdkKSksCiAgICAgICAgICBhZ2FpblB3ZDogdGhpcy4kbWQ1KHRoaXMuJG1kNSh0aGlzLmFnYWluUHdkKSkKICAgICAgICB9OwogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gYXdhaXQgdGhpcy4kYXhpb3MucHV0KCIvdXNlci91cGRhdGVQd2QiLCB1c2VyVXBkYXRlUHdkRFRPKTsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICB0aXRsZTogIuS/ruaUueWvhueggSIsCiAgICAgICAgICBtZXNzYWdlOiBkYXRhLmNvZGUgPT09IDIwMCA/ICLkv67mlLnmiJDlip/vvIzor7fph43mlrDnmbvlvZUiIDogZGF0YS5tc2csCiAgICAgICAgICB0eXBlOiBkYXRhLmNvZGUgPT09IDIwMCA/ICJzdWNjZXNzIiA6ICJlcnJvciIKICAgICAgICB9KTsKICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIGNsZWFyVG9rZW4oKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigi5a+G56CB5L+u5pS55aSx6LSlOiIsIGVycm9yKTsKICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgdGl0bGU6ICLplJnor68iLAogICAgICAgICAgbWVzc2FnZTogIuWvhueggeS/ruaUueWksei0pe+8jOivt+eojeWQjumHjeivlSIKICAgICAgICB9KTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLnN1Ym1pdHRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIOWvhueggemqjOivgQogICAgdmFsaWRhdGVQYXNzd29yZCgpIHsKICAgICAgaWYgKHRoaXMub2xkUHdkLmxlbmd0aCA8IDgpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuWOn+Wni+WvhueggemVv+W6puS4jeiDveWwkeS6jjjkvY0iKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmV3UHdkLmxlbmd0aCA8IDgpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuaWsOWvhueggemVv+W6puS4jeiDveWwkeS6jjjkvY0iKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmV3UHdkICE9PSB0aGlzLmFnYWluUHdkKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLkuKTmrKHovpPlhaXnmoTmlrDlr4bnoIHkuI3kuIDoh7QiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIC8vIOWvhueggeW8uuW6pumqjOivgQogICAgICBjb25zdCBoYXNOdW1iZXIgPSAvXGQvLnRlc3QodGhpcy5uZXdQd2QpOwogICAgICBjb25zdCBoYXNMZXR0ZXIgPSAvW2EtekEtWl0vLnRlc3QodGhpcy5uZXdQd2QpOwogICAgICBpZiAoIWhhc051bWJlciB8fCAhaGFzTGV0dGVyKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLlr4bnoIHlupTljIXlkKvlrZfmr43lkozmlbDlrZciKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["clearToken","name","data","oldPwd","newPwd","againPwd","submitting","computed","formValid","length","methods","postInfo","validatePassword","userUpdatePwdDTO","$md5","$axios","put","$notify","duration","title","message","code","msg","type","$router","push","error","console","$message","warning","hasNumber","test","hasLetter"],"sources":["src/views/user/ResetPwd.vue"],"sourcesContent":["<template>\r\n    <div class=\"password-reset-container\">\r\n      <!-- 密码修改表单 -->\r\n      <div class=\"password-form\">\r\n        <!-- 原始密码 -->\r\n        <div class=\"form-item\">\r\n          <label class=\"form-label\">*原始密码</label>\r\n          <el-input\r\n            v-model=\"oldPwd\"\r\n            type=\"password\"\r\n            placeholder=\"请输入原始密码\"\r\n            show-password\r\n            clearable\r\n            class=\"password-input\"\r\n          ></el-input>\r\n        </div>\r\n  \r\n        <!-- 新密码 -->\r\n        <div class=\"form-item\">\r\n          <label class=\"form-label\">*新密码</label>\r\n          <el-input\r\n            v-model=\"newPwd\"\r\n            type=\"password\"\r\n            placeholder=\"请输入新密码\"\r\n            show-password\r\n            clearable\r\n            class=\"password-input\"\r\n          ></el-input>\r\n        </div>\r\n  \r\n        <!-- 确认密码 -->\r\n        <div class=\"form-item\">\r\n          <label class=\"form-label\">*确认密码</label>\r\n          <el-input\r\n            v-model=\"againPwd\"\r\n            type=\"password\"\r\n            placeholder=\"请再次输入新密码\"\r\n            show-password\r\n            clearable\r\n            class=\"password-input\"\r\n            @keyup.enter.native=\"postInfo\"\r\n          ></el-input>\r\n        </div>\r\n  \r\n        <!-- 密码强度提示 -->\r\n        <div class=\"password-tips\">\r\n          <p>密码要求：</p>\r\n          <ul>\r\n            <li>长度8-20个字符</li>\r\n            <li>包含字母和数字</li>\r\n            <li>建议使用特殊字符增加安全性</li>\r\n          </ul>\r\n        </div>\r\n  \r\n        <!-- 提交按钮 -->\r\n        <div class=\"submit-btn\">\r\n          <el-button\r\n            type=\"primary\"\r\n            round\r\n            @click=\"postInfo\"\r\n            :loading=\"submitting\"\r\n            :disabled=\"!formValid\"\r\n          >\r\n            立即修改\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { clearToken } from \"@/utils/storage\";\r\n  \r\n  export default {\r\n    name: \"ResetPwd\",\r\n    data() {\r\n      return {\r\n        oldPwd: \"\",\r\n        newPwd: \"\",\r\n        againPwd: \"\",\r\n        submitting: false\r\n      };\r\n    },\r\n    computed: {\r\n      formValid() {\r\n        return (\r\n          this.oldPwd.length >= 8 &&\r\n          this.newPwd.length >= 8 &&\r\n          this.againPwd.length >= 8 &&\r\n          this.newPwd === this.againPwd\r\n        );\r\n      }\r\n    },\r\n    methods: {\r\n      // 提交密码修改\r\n      async postInfo() {\r\n        if (!this.validatePassword()) {\r\n          return;\r\n        }\r\n  \r\n        this.submitting = true;\r\n  \r\n        try {\r\n          const userUpdatePwdDTO = {\r\n            oldPwd: this.$md5(this.$md5(this.oldPwd)),\r\n            newPwd: this.$md5(this.$md5(this.newPwd)),\r\n            againPwd: this.$md5(this.$md5(this.againPwd))\r\n          };\r\n  \r\n          const { data } = await this.$axios.put(\"/user/updatePwd\", userUpdatePwdDTO);\r\n  \r\n          this.$notify({\r\n            duration: 2000,\r\n            title: \"修改密码\",\r\n            message: data.code === 200 ? \"修改成功，请重新登录\" : data.msg,\r\n            type: data.code === 200 ? \"success\" : \"error\"\r\n          });\r\n  \r\n          if (data.code === 200) {\r\n            clearToken();\r\n            this.$router.push(\"/login\");\r\n          }\r\n        } catch (error) {\r\n          console.error(\"密码修改失败:\", error);\r\n          this.$notify.error({\r\n            title: \"错误\",\r\n            message: \"密码修改失败，请稍后重试\"\r\n          });\r\n        } finally {\r\n          this.submitting = false;\r\n        }\r\n      },\r\n  \r\n      // 密码验证\r\n      validatePassword() {\r\n        if (this.oldPwd.length < 8) {\r\n          this.$message.warning(\"原始密码长度不能少于8位\");\r\n          return false;\r\n        }\r\n  \r\n        if (this.newPwd.length < 8) {\r\n          this.$message.warning(\"新密码长度不能少于8位\");\r\n          return false;\r\n        }\r\n  \r\n        if (this.newPwd !== this.againPwd) {\r\n          this.$message.warning(\"两次输入的新密码不一致\");\r\n          return false;\r\n        }\r\n  \r\n        // 密码强度验证\r\n        const hasNumber = /\\d/.test(this.newPwd);\r\n        const hasLetter = /[a-zA-Z]/.test(this.newPwd);\r\n  \r\n        if (!hasNumber || !hasLetter) {\r\n          this.$message.warning(\"密码应包含字母和数字\");\r\n          return false;\r\n        }\r\n  \r\n        return true;\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped lang=\"scss\">\r\n  .password-reset-container {\r\n    max-width: 500px;\r\n    margin: 0 auto;\r\n    padding: 30px;\r\n    background-color: #fff;\r\n    border-radius: 8px;\r\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .form-label {\r\n    display: block;\r\n    margin-bottom: 8px;\r\n    font-size: 14px;\r\n    color: #606266;\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .form-item {\r\n    margin-bottom: 20px;\r\n  }\r\n  \r\n  .password-input {\r\n    width: 100%;\r\n  }\r\n  \r\n  .password-tips {\r\n    margin: 20px 0;\r\n    padding: 10px;\r\n    background-color: #f8f8f8;\r\n    border-radius: 4px;\r\n    font-size: 13px;\r\n    color: #909399;\r\n  \r\n    p {\r\n      margin-bottom: 5px;\r\n      font-weight: 500;\r\n    }\r\n  \r\n    ul {\r\n      margin: 0;\r\n      padding-left: 20px;\r\n    }\r\n  }\r\n  \r\n  .submit-btn {\r\n    text-align: center;\r\n    margin-top: 30px;\r\n  \r\n    .el-button {\r\n      width: 200px;\r\n      padding: 12px 0;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n  </style>"],"mappings":"AAuEA,SAAAA,UAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;MACAC,MAAA;MACAC,QAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACAC,UAAA;MACA,OACA,KAAAL,MAAA,CAAAM,MAAA,SACA,KAAAL,MAAA,CAAAK,MAAA,SACA,KAAAJ,QAAA,CAAAI,MAAA,SACA,KAAAL,MAAA,UAAAC,QAAA;IAEA;EACA;EACAK,OAAA;IACA;IACA,MAAAC,SAAA;MACA,UAAAC,gBAAA;QACA;MACA;MAEA,KAAAN,UAAA;MAEA;QACA,MAAAO,gBAAA;UACAV,MAAA,OAAAW,IAAA,MAAAA,IAAA,MAAAX,MAAA;UACAC,MAAA,OAAAU,IAAA,MAAAA,IAAA,MAAAV,MAAA;UACAC,QAAA,OAAAS,IAAA,MAAAA,IAAA,MAAAT,QAAA;QACA;QAEA;UAAAH;QAAA,eAAAa,MAAA,CAAAC,GAAA,oBAAAH,gBAAA;QAEA,KAAAI,OAAA;UACAC,QAAA;UACAC,KAAA;UACAC,OAAA,EAAAlB,IAAA,CAAAmB,IAAA,0BAAAnB,IAAA,CAAAoB,GAAA;UACAC,IAAA,EAAArB,IAAA,CAAAmB,IAAA;QACA;QAEA,IAAAnB,IAAA,CAAAmB,IAAA;UACArB,UAAA;UACA,KAAAwB,OAAA,CAAAC,IAAA;QACA;MACA,SAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,YAAAA,KAAA;QACA,KAAAT,OAAA,CAAAS,KAAA;UACAP,KAAA;UACAC,OAAA;QACA;MACA;QACA,KAAAd,UAAA;MACA;IACA;IAEA;IACAM,iBAAA;MACA,SAAAT,MAAA,CAAAM,MAAA;QACA,KAAAmB,QAAA,CAAAC,OAAA;QACA;MACA;MAEA,SAAAzB,MAAA,CAAAK,MAAA;QACA,KAAAmB,QAAA,CAAAC,OAAA;QACA;MACA;MAEA,SAAAzB,MAAA,UAAAC,QAAA;QACA,KAAAuB,QAAA,CAAAC,OAAA;QACA;MACA;;MAEA;MACA,MAAAC,SAAA,QAAAC,IAAA,MAAA3B,MAAA;MACA,MAAA4B,SAAA,cAAAD,IAAA,MAAA3B,MAAA;MAEA,KAAA0B,SAAA,KAAAE,SAAA;QACA,KAAAJ,QAAA,CAAAC,OAAA;QACA;MACA;MAEA;IACA;EACA;AACA","ignoreList":[]}]}